// ==========================
// ç¬¬ä¸€ç« äº‹ä»¶æ•°æ®ï¼ˆé‡å†™ç‰ˆï¼‰
// ã€Šç¯ç«åˆé†’ã€‹
// ==========================

Game.Events_ch1 = [
    // ===== 1. åˆ°è¾¾å—æ˜Œï¼šç«è½¦ç«™ + ç¬¬ä¸€æ¬¡æ¶ˆæ¯ =====
    {
      id: "ch1_intro_1",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "å—æ˜Œç«™çš„è‡ªåŠ¨é—¨ç¼“ç¼“åˆä¸Šï¼Œé˜´å†·çš„é›¨æ°”ä»é—¨ç¼é‡ŒçŒè¿›æ¥ã€‚\n\n" +
        "ä½ æ‹–ç€è¡Œæç®±èµ°å‡ºè½¦ç«™ï¼Œå¤§é›¨æŠŠç«™å‰å¹¿åœºçš„éœ“è™¹ç¯æ‹§æˆä¸€ç‰‡æ™•å¼€çš„è‰²å—ã€‚\n\n" +
        "æ‰‹æœºéœ‡äº†ä¸€ä¸‹ï¼Œæ˜¯ä¸€ä¸ªå¤‡æ³¨ä¸ºã€çº¢å§ã€‘çš„å¾®ä¿¡å¼¹å‡ºï¼š\n" +
        "ã€Œåˆ°äº†æ²¡ï¼Ÿä»Šæ™šæœ‰å±€ï¼Œæˆ‘å¸¦ä½ è®¤è®¤å—æ˜Œè¿™å¸®å¥‡æ€ªçš„äººã€‚ã€\n\n" +
        "ä½ æ·±å¸ä¸€å£æ°”ï¼Œå¿½ç„¶è§‰å¾—ç©ºæ°”ä¸­æœ‰ä»€ä¹ˆä¸œè¥¿åœ¨æµåŠ¨â€”â€”" +
        "ä¸æ˜¯é£ï¼Œæ›´åƒæ˜¯æŸç§çœ‹ä¸è§çš„èƒ½é‡ï¼Œåœ¨é›¨å¹•ä¸­è‹¥éšè‹¥ç°ã€‚",
      options: [
        {
          text: "å…ˆæŒ‰å¯¼èˆªå»å‡ºç§Ÿå±‹ï¼Œå®‰é¡¿ä¸€ä¸‹å†è¯´",
          next: "ch1_rental_arrival",
          effects: { exp: 5 }
        },
        {
          text: "åœ¨è½¦ç«™å¹¿åœºæ™ƒä¸€åœˆï¼Œæ„Ÿå—ä¸€ä¸‹è¿™åº§åŸå¸‚",
          next: "ch1_station_walk_1",
          effects: { exp: 5, energy: -5 }
        }
      ]
    },
  
    // ===== 1.1 è½¦ç«™å°æ¢ç´¢ï¼šç®€å•æ‹‰æ—¶é•¿ + ç»™ç‚¹é’±/è¯ =====
    {
      id: "ch1_station_walk_1",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ æ²¡æœ‰ç«‹åˆ»èµ°ï¼Œè€Œæ˜¯æ‹åˆ°å¹¿åœºä¸€ä¾§çš„é®é›¨æ£šä¸‹ã€‚\n\n" +
        "å¤–åœ°å£éŸ³ã€è¡Œæç®±ã€å¤–å–å‘˜çš„ç”µåŠ¨è½¦ã€è¿Ÿæ¥çš„å‡ºç§Ÿè½¦å–‡å­å£°â€¦â€¦" +
        "è¿™åº§åŸå¸‚çœ‹èµ·æ¥å’Œå¾ˆå¤šåœ°æ–¹éƒ½å·®ä¸å¤šï¼Œåˆå¥½åƒå“ªé‡Œæœ‰ä¸€ç‚¹ä¸ä¸€æ ·ã€‚\n\n" +
        "ä½ é¡ºæ‰‹åœ¨ä¾¿åˆ©æ‘Šä¹°äº†ä¸€ç“¶é¥®æ–™ï¼Œç›¯ç€é›¨å¸˜å‘å‘†äº†ä¸€ä¼šå„¿ï¼Œ" +
        "è„‘å­é‡Œé—ªè¿‡ä¸€å¥è¯ï¼šâ€”â€”å¦‚æœä¸€åˆ‡åªå‰©ä¸‹ä¸Šç­å’Œæˆ¿ç§Ÿï¼Œé‚£æˆ‘æ¥è¿™é‡Œå¹²å˜›ï¼Ÿ",
      options: [
        {
          text: "æ‘‡æ‘‡å¤´ï¼Œè¿˜æ˜¯å…ˆå»å‡ºç§Ÿå±‹å§",
          next: "ch1_rental_arrival",
          effects: { money: -5, hp: 5 }
        },
        {
          text: "ç»™çº¢å§å›ä¸ªæ¶ˆæ¯ï¼šå…ˆåˆ«æ€¥ï¼Œç­‰æˆ‘å®‰é¡¿å¥½",
          next: "ch1_rental_arrival",
          effects: { exp: 5 }
        }
      ]
    },

    // ===== 1.2 åˆ°è¾¾å‡ºç§Ÿå±‹ï¼šè¿‡æ¸¡åˆ°å‚æ™šç­‰å¾…çº¢å§æ¶ˆæ¯ =====
    {
      id: "ch1_rental_arrival",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ ç»ˆäºåˆ°äº†å‡ºç§Ÿå±‹ã€‚è™½ç„¶æˆ¿é—´ä¸å¤§ï¼Œä½†è¿™å°±æ˜¯ä½ åœ¨å—æ˜Œçš„ç¬¬ä¸€ä¸ªè½è„šç‚¹äº†ã€‚\n\n" +
        "ä½ æ”¾ä¸‹è¡Œæï¼Œæ·±å¸äº†ä¸€å£æ°”ã€‚çª—å¤–æ˜¯è¿™åº§åŸå¸‚ç‰¹æœ‰çš„å–§åš£ï¼Œè€Œè¿™é‡Œï¼Œæš‚æ—¶æ˜¯å±äºä½ çš„å°ç©ºé—´ã€‚\n\n" +
        "æ˜¯æ—¶å€™æ•´ç†ä¸€ä¸‹æ€ç»ªï¼Œå‡†å¤‡å¼€å§‹æ–°çš„ç”Ÿæ´»äº†ã€‚",
      options: [
        {
          text: "æ•´ç†å¥½ä¸œè¥¿ï¼Œç­‰å¾…æ™šä¸Šçš„èšä¼š",
          next: "ch1_rental_to_evening",
          effects: { exp: 5 }
        }
      ]
    },
  
    // ===== 2. å‡ºç§Ÿå±‹ï¼šç°å®è½å·® + ç¬¬ä¸€æ¬¡çµåŠ›æš—ç¤º =====
    {
      id: "ch1_rental_1",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "å‡ºç§Ÿå±‹åœ¨ä¸€æ¡æœ‰ç‚¹æ—§çš„å°å··å°½å¤´ã€‚\n\n" +
        "å®æ™¯æ¯”ç…§ç‰‡æš—äº†ä¸€æ•´åº¦ï¼Œæˆ¿é—´çš„å¢™è§’ç•¥å¾®å‘æ½®ï¼Œçª—å¤–æ˜¯å¶å°”é©¶è¿‡çš„è½¦ç¯ã€‚\n\n" +
        "ä½ æŠŠè¡Œæç®±æ”¾åˆ°å¢™è¾¹ï¼Œæ•´ä¸ªäººååˆ°åºŠä¸Šï¼Œå¼¹ç°§å‘å‡ºä¸€ç‚¹æ²¡ç¡é†’çš„å±å‘€å£°ã€‚\n\n" +
        "å®‰é™ä¸‹æ¥ä¹‹åï¼Œä½ çªç„¶è§‰å¾—èƒ¸å£æœ‰ç‚¹å‘çƒ­ï¼Œåƒæ˜¯ç†¬å¤œå¤ªå¤šç•™ä¸‹çš„å¿ƒæ‚¸ï¼Œåˆåƒæ˜¯â€¦â€¦ä»€ä¹ˆåœ¨è½»è½»æ•²é—¨ã€‚\n\n" +
        "ä½ æœ›å‘çª—å¤–ï¼Œé›¨è¿˜åœ¨ä¸‹ï¼Œä½†ç©ºæ°”ä¸­é‚£ç§å¼‚æ ·çš„æµåŠ¨æ„Ÿä¼¼ä¹æ›´æ˜æ˜¾äº†â€”â€”" +
        "è¿™åº§åŸå¸‚é‡Œï¼Œæœ‰ä»€ä¹ˆä¸œè¥¿æ­£åœ¨è‹é†’ã€‚",
      options: [
        {
          text: "é—­ä¸Šçœ¼ç›ï¼Œè®¤çœŸæ„Ÿå—ä¸€ä¸‹è¿™è‚¡å¼‚æ ·çš„æ„Ÿè§‰",
          next: "ch1_awaken_hint_1",
          effects: { exp: 10, mp: 5, energy: -2 }
        },
        {
          text: "åœ¨æˆ¿é—´é‡Œç¿»æ‰¾ä¸€ä¸‹ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰èƒ½ç”¨çš„ä¸œè¥¿",
          next: "ch1_rental_find_item",
          effects: { exp: 5, energy: -5 }
        },
        {
          text: "ç®—äº†ï¼Œå½“è‡ªå·±æ˜¯å¤ªç´¯äº†ï¼Œä¸‹æ¥¼å»ä¾¿åˆ©åº—",
          next: "ch1_convenience_store_visit",
          effects: { hp: 5, energy: -5 }
        },
        {
          text: "èººä¸€ä¼šå„¿åˆ·æ‰‹æœºï¼Œå†è€ƒè™‘è¦ä¸è¦å»æ‰¾çº¢å§",
          next: "ch1_rental_scroll_1",
          effects: { mp: 5 }
        }
      ]
    },
    {
      id: "ch1_rental_find_item",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ åœ¨æˆ¿é—´é‡Œç¿»æ‰¾èµ·æ¥ã€‚\n\n" +
        "æŠ½å±‰é‡Œæœ‰ä¸€äº›å‰ä»»ç§Ÿå®¢ç•™ä¸‹çš„æ‚ç‰©ï¼šå‡ æ ¹æ•°æ®çº¿ã€ä¸€ä¸ªæ—§æ‰‹æœºå£³ã€è¿˜æœ‰ä¸€æŠŠçœ‹èµ·æ¥æœ‰ç‚¹é”ˆçš„æ°´æœåˆ€ã€‚\n\n" +
        "ä½ æ‹¿èµ·é‚£æŠŠæ°´æœåˆ€ï¼Œçªç„¶æ„Ÿè§‰å®ƒä¼¼ä¹å’Œä½“å†…çš„é‚£è‚¡åŠ›é‡äº§ç”Ÿäº†æŸç§å…±é¸£ã€‚\n\n" +
        "è™½ç„¶çœ‹èµ·æ¥å¾ˆæ™®é€šï¼Œä½†ä½ è§‰å¾—å®ƒå¯èƒ½æœ‰ç‚¹ç”¨ã€‚",
      options: [
        {
          text: "æ”¶ä¸‹è¿™æŠŠæ°´æœåˆ€",
          next: "ch1_rental_1",
          effects: { item: { id: "starter_sword", count: 1 }, exp: 10 }
        },
        {
          text: "ç®—äº†ï¼Œè¿˜æ˜¯æ„Ÿå—ä¸€ä¸‹ä½“å†…çš„åŠ›é‡",
          next: "ch1_awaken_hint_1",
          effects: { exp: 10, mp: 5 }
        }
      ],
      // åŠ¨æ€ä¿®æ”¹é€‰é¡¹æ–‡æœ¬ï¼ˆå¦‚æœå·²æœ‰è£…å¤‡ï¼‰
      dynamicOptions: function() {
          const hasSword = Game.State.getItemCount("starter_sword") > 0;
          
          if (hasSword) {
              // å¦‚æœå·²æœ‰æ°´æœåˆ€ï¼Œä¿®æ”¹ç¬¬ä¸€ä¸ªé€‰é¡¹çš„æ–‡æœ¬
              return [
                  {
                      text: "ä½ å·²ç»æœ‰äº†è¿™æŠŠæ°´æœåˆ€",
                      next: "ch1_rental_1",
                      effects: { exp: 5 },
                      disabled: true
                  },
                  {
                      text: "ç®—äº†ï¼Œè¿˜æ˜¯æ„Ÿå—ä¸€ä¸‹ä½“å†…çš„åŠ›é‡",
                      next: "ch1_awaken_hint_1",
                      effects: { exp: 10, mp: 5 }
                  }
              ];
          }
          return null; // ä½¿ç”¨é»˜è®¤é€‰é¡¹
      }
    },
  
    {
      id: "ch1_rental_scroll_1",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ åˆ·ç€çŸ­è§†é¢‘ï¼Œç®—æ³•è¿…é€Ÿç»™ä½ æ¨é€äº†â€œå—æ˜Œç¾é£Ÿä¸€æ—¥æ¸¸â€â€œæ‰“å·¥äººçš„ç§Ÿæˆ¿è¡€æ³ªå²â€ã€‚\n\n" +
        "æ¯ä¸ªè§†é¢‘éƒ½å¾ˆåµï¼Œä½†åˆä¸Šå£°éŸ³ä¹‹åï¼Œä½ åªå‰©ä¸‹è‡ªå·±å¿ƒè·³çš„å›éŸ³ã€‚\n\n" +
        "èƒ¸å£é‚£è‚¡å‘çƒ­çš„æ„Ÿè§‰ä¸ä½†æ²¡é€€ï¼Œåè€Œæ›´æ¸…æ™°äº†ä¸€ç‚¹ã€‚",
      options: [
        {
          text: "ä¸å¯¹åŠ²ï¼Œå†æ¬¡é›†ä¸­æ³¨æ„åŠ›ï¼Œè¯•ç€æ„Ÿå—é‚£è‚¡åŠ›é‡",
          next: "ch1_awaken_hint_1",
          effects: { exp: 10, energy: -2 }
        },
        {
          text: "è¿˜æ˜¯å…ˆå‡ºå»è½¬è½¬ï¼Œæ´»åŠ¨ä¸€ä¸‹",
          next: "ch1_street_explore",
          effects: { exp: 5, energy: -5 }
        },
        {
          text: "å»é™„è¿‘çš„åºŸå¼ƒå·¥å‚çœ‹çœ‹ï¼ˆå¯ä»¥ç»ƒçº§ï¼‰",
          next: "ch1_training_area_hub",
          effects: { energy: -5 }
        }
      ]
    },
  
    // ===== 2.1 è§‰é†’æš—ç¤ºï¼šä½†å…ˆä¸ç›´æ¥å¼€æŒ‚ =====
    {
      id: "ch1_awaken_hint_1",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ å…³æ‰æ‰‹æœºï¼ŒæŠŠæ³¨æ„åŠ›æ…¢æ…¢æ”¶å›æ¥ã€‚\n\n" +
        "é‚£è‚¡å‘çƒ­æ„Ÿåƒæœ‰äº†å½¢çŠ¶ï¼Œä»å¿ƒå£ä¸€ç‚¹ä¸€ç‚¹æµå‘å››è‚¢ï¼Œåˆé¡ºç€èƒŒè„Šå¾€ä¸Šï¼Œ" +
        "åœ¨è„‘ååœäº†ä¸€ä¸‹ï¼Œåƒæœ‰äººæŒ‰äº†ä¸€ä¸‹å¼€å…³ã€‚\n\n" +
        "ä½ çªç„¶å¬è§çª—å¤–é›¨å£°å˜å¾—å¾ˆæ¸…æ¥šï¼Œè¿æ¥¼ä¸‹å··å­é‡Œè¯´è¯çš„å£°éŸ³éƒ½éšçº¦å¯è¾¨ã€‚\n\n" +
        "â€”â€”è¿™ä¸æ˜¯å•çº¯çš„ç–²åŠ³ã€‚\n" +
        "æœ‰æŸç§ä¸œè¥¿ï¼Œåœ¨è¿™åº§é™Œç”ŸåŸå¸‚é‡Œæ‚„æ‚„å›åº”äº†ä½ ã€‚",
      options: [
        {
          text: "ç»§ç»­é¡ºç€è¿™è‚¡æ„Ÿè§‰å¼•å¯¼ä¸‹å»",
          next: "ch1_awaken_hint_2",
          effects: { exp: 15, mp: 10, energy: -2 }
        },
        {
          text: "æœ‰ç‚¹æ€•ï¼Œè¿˜æ˜¯å…ˆå‡ºå»èµ°èµ°ï¼Œçœ‹ç‚¹æ­£å¸¸ä¸œè¥¿",
          next: "ch1_street_explore",
          effects: { hp: 5, energy: -5 }
        }
      ]
    },
  
    {
      id: "ch1_awaken_hint_2",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ å°è¯•åœ¨å¿ƒé‡Œæå‡ºé‚£è‚¡åŠ›é‡çš„æµå‘ã€‚\n\n" +
        "å®ƒå¹¶ä¸å¬è¯ï¼Œå´ä¹Ÿæ²¡æœ‰æŠ—æ‹’ï¼Œåªæ˜¯è¢«ä½ è½»è½»ç¢°åˆ°å°±å¾€å››å‘¨æ•£å¼€ï¼Œ" +
        "åƒæ˜¯è¿™é—´ç ´æ—§å‡ºç§Ÿå±‹é‡Œï¼Œçªç„¶å¤šäº†ä¸€ç›ä½ çœ‹ä¸è§çš„ç¯ã€‚\n\n" +
        "ä½ çå¼€çœ¼ï¼Œä¸–ç•Œæ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œä½†ä½ çŸ¥é“â€”â€”æœ‰ä»€ä¹ˆå·²ç»ä¸ä¸€æ ·äº†ã€‚",
      options: [
        {
          text: "è®°ä¸‹è¿™ç§æ„Ÿè§‰ï¼Œæ”¹å¤©é—®é—®çº¢å§",
          next: "ch1_rental_to_evening",
          effects: { exp: 10 }
        },
        {
          text: "è¶å¤©è¿˜æ²¡é»‘ï¼Œä¸‹æ¥¼çœ‹çœ‹å‘¨å›´çš„è¡—åŒº",
          next: "ch1_street_explore",
          effects: { exp: 5, energy: -5 }
        }
      ]
    },
  
    {
      id: "ch1_rental_to_evening",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "æ—¶é—´åœ¨ä½ åå¤ç¢ç£¨è¿™è‚¡åŠ›é‡ä¸­æ…¢æ…¢è¿‡å»ã€‚\n\n" +
        "çª—å¤–çš„é›¨å£°ç”±å¯†è½¬ç–ï¼Œå¤©è‰²ä»ç°ç™½ç†¬æˆæ·±è“ï¼ŒåŸå¸‚å¼€å§‹äº®èµ·ä¸€ç›ä¸€ç›ç¯ã€‚\n\n" +
        "æ‰‹æœºå†æ¬¡éœ‡åŠ¨ï¼Œæ˜¯çº¢å§å‘æ¥çš„æ–°æ¶ˆæ¯ï¼š\n" +
        "ã€Œå·®ä¸å¤šäº†å§ï¼Ÿæ™šä¸Šå…«ç‚¹ï¼Œè€åœ°æ–¹è§ã€‚ã€\n\n" +
        "ä½ æ‘¸äº†æ‘¸è‚šå­ï¼Œæ„Ÿè§‰æœ‰ç‚¹é¥¿ï¼Œå†³å®šå…ˆå»æ¥¼ä¸‹ä¾¿åˆ©åº—ä¹°ç‚¹è¡¥ç»™ï¼Œé¡ºä¾¿å»èµ´çº¦ã€‚",
      options: [
        {
          text: "ä¸‹æ¥¼å»ä¾¿åˆ©åº— (å‰§æƒ…æ¨è¿›)",
          next: "ch1_convenience_store_visit",
          effects: { energy: -2 }
        }
      ]
    },
  
    // ===== 3. æ¥¼ä¸‹ä¾¿åˆ©åº— + å•†åº—å…¥å£ =====
    {
      id: "ch1_convenience_store_visit",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ æ‰“ç€ä¼èµ°åˆ°æ¥¼ä¸‹çš„ä¾¿åˆ©åº—ã€‚\n\n" +
        "æ˜é»„çš„ç¯å…‰æŠŠè´§æ¶ç…§å¾—æš–æ´‹æ´‹çš„ï¼Œè€æ¿ä¸€è¾¹çœ‹ç€ç”µè§†å‰§ï¼Œä¸€è¾¹æŠ¬å¤´é—®ä½ ï¼š\n" +
        "ã€Œåˆšæ¬æ¥çš„å§ï¼Ÿè¦ç‚¹ä»€ä¹ˆï¼Ÿã€\n\n" +
        "ä½ æ‰«äº†ä¸€çœ¼è´§æ¶ï¼Œå‘ç°é™¤äº†å¸¸è§çš„æ­¢ç—›è¯å’Œæ³¡é¢ï¼Œè€æ¿æ‰‹é‡Œè¿˜æ‹¿ç€ä¸€æšåŒ…ç€é»„ç¬¦çš„çŸ³å¤´ï¼Œä¼¼ä¹åœ¨æŠŠç©ç€ä»€ä¹ˆã€‚\n\n" +
        "é‚£çŸ³å¤´åœ¨ç¯å…‰ä¸‹æ³›ç€å¾®å¼±çš„è“å…‰ï¼Œä½ ä½“å†…çš„é‚£è‚¡å¼‚æ ·æ„Ÿè§‰ä¼¼ä¹è¢«å®ƒå¸å¼•ï¼Œå¾®å¾®é¢¤åŠ¨äº†ä¸€ä¸‹ã€‚",
      options: [
        {
          text: "ç›¯ç€ä»–æ‰‹é‡Œçš„çŸ³å¤´ï¼šè€æ¿ï¼Œè¿™ä¸œè¥¿æ€ä¹ˆå–ï¼Ÿ",
          next: "ch1_convenience_store_unlock",
          effects: {}
        },
        {
          text: "å°±è¦æ™®é€šçš„æ³¡é¢å’Œæ°´ã€‚",
          next: "ch1_convenience_store_normal",
          effects: {}
        }
      ]
    },

    // è§£é”éšè—æ¸ é“çš„å‰§æƒ…
    {
      id: "ch1_convenience_store_unlock",
      type: "story",
      speaker: "è€æ¿",
      text:
        "è€æ¿æ„£äº†ä¸€ä¸‹ï¼Œç„¶åéœ²å‡ºä¸€ä¸ªæ„å‘³æ·±é•¿çš„ç¬‘å®¹ã€‚\n\n" +
        "ã€Œå˜¿ï¼Œè¡Œå®¶å•Šã€‚æ—¢ç„¶çœ‹å‡ºæ¥äº†ï¼Œä»¥åæœ‰å¥½ä¸œè¥¿æˆ‘éƒ½ç»™ä½ ç•™ç€ï¼Œå°±åœ¨æŸœå°ä¸‹é¢ã€‚ã€\n\n" +
        "ä»–æŠŠé‚£æšçµçŸ³æ”¾å›æŸœå°ä¸‹ï¼Œåˆä»é‡Œé¢æ‹¿å‡ºå‡ æ ·ä¸œè¥¿ï¼š\n" +
        "ã€Œèšæ°”ä¸¹ã€æ³•å‰‘ã€é˜µæ³•ææ–™â€¦â€¦è¿™äº›ä¸€èˆ¬äººç”¨ä¸ä¸Šï¼Œä½†ä½ åº”è¯¥çŸ¥é“æ˜¯ä»€ä¹ˆã€‚ã€\n\n" +
        "ä½ æ„Ÿè§‰è€æ¿çš„çœ¼ç¥é‡Œå¤šäº†ä¸€ä¸è®¤åŒï¼Œä»¿ä½›æ‰¾åˆ°äº†åŒç±»ã€‚",
      options: [
        {
          text: "ç‚¹ç‚¹å¤´ï¼Œå¼€å§‹é€‰è´­",
          next: "ch1_convenience_store_shop_unlocked",
          effects: {
            flag: "convenienceStoreUnlocked"
          }
        }
      ]
    },

    // æ™®é€šè´­ç‰©ï¼ˆæœªè§£é”ï¼‰
    {
      id: "ch1_convenience_store_normal",
      type: "shop",
      shopId: "ch1_convenience_store",
      speaker: "æ—ç™½",
      text:
        "è€æ¿ç‚¹ç‚¹å¤´ï¼ŒæŠŠçŸ³å¤´æ”¶äº†èµ·æ¥ã€‚\n\n" +
        "ã€Œå¥½å˜ï¼Œæ³¡é¢å’Œæ°´ï¼Œä¸€å…±20å—ã€‚ã€\n\n" +
        "ä½ ä»˜äº†é’±ï¼Œæ‹ç€å¡‘æ–™è¢‹å‡†å¤‡ç¦»å¼€ã€‚",
      next: "ch1_after_convenience"
    },

    // è§£é”åçš„å•†åº—ç•Œé¢
    {
      id: "ch1_convenience_store_shop_unlocked",
      type: "shop",
      shopId: "ch1_convenience_store",
      speaker: "æ—ç™½",
      text:
        "ä½ å¼€å§‹æµè§ˆè´§æ¶ã€‚é™¤äº†å¸¸è§çš„æ­¢ç—›è¯å’Œæ³¡é¢ï¼ŒæŸœå°ä¸‹é¢è¿˜æ‘†ç€å‡ æ ·æ•£å‘ç€å¾®å¼±çµæ°”çš„ç‰©å“ã€‚\n\n" +
        "è€æ¿åœ¨ä¸€æ—çœ‹ç€ï¼Œçœ¼ç¥é‡Œå¸¦ç€ä¸€ä¸æœŸå¾…ã€‚",
      next: "ch1_after_convenience"
    },
  
    {
      id: "ch1_after_convenience",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ æ‹ç€å¡‘æ–™è¢‹èµ°å‡ºä¾¿åˆ©åº—ã€‚\n\n" +
        "åˆšèµ°åˆ°è¡—è§’ï¼Œä¸€ä¸ªæ‘†æ‘Šçš„è€å¤´çªç„¶å«ä½äº†ä½ ã€‚",
      options: [
        {
          text: "åœä¸‹è„šæ­¥çœ‹è¿‡å»",
          next: "ch1_event_fortune_teller",
          effects: {}
        }
      ]
    },
  
    // ===== 4. è¡—åŒºæ¢ç´¢ + å¼ºåˆ¶è§¦å‘ç®—å‘½è€å¤´ =====
    {
      id: "ch1_street_explore",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ æ²¿ç€å··å­èµ°åˆ°ä¸»å¹²é“ã€‚\n\n" +
        "å…¬äº¤ç«™ç‰Œä¸‹æœ‰äººæ‰“ç€ä¼åˆ·æ‰‹æœºï¼Œç”µåŠ¨è½¦ä»ä½ èº«è¾¹ç–¾é©°è€Œè¿‡ï¼Œ" +
        "è¿œå¤„é«˜æ¥¼çš„ç¯å…‰åƒä¸€æ•´é¢å‘å…‰çš„å¢™ã€‚\n\n" +
        "ä½ å¿½ç„¶è§‰å¾—ï¼Œè¿™åº§åŸå¸‚è¡¨é¢ä¸Šå¾ˆæ™®é€šï¼Œä½†ç©ºæ°”é‡Œæ··ç€ä¸€ç§è¯´ä¸æ¸…çš„èºåŠ¨â€”â€”" +
        "é‚£è‚¡åœ¨ä½ ä½“å†…æ¸¸èµ°çš„ä¸œè¥¿ï¼Œä¼¼ä¹ä¹Ÿåœ¨å¤–é¢æ‰¾ç€ä»€ä¹ˆå…±é¸£ã€‚\n\n" +
        "ä½ å¾€äººå°‘çš„è¡—è§’èµ°å»ï¼Œæƒ³æ‰¾ä¸ªå®‰é™çš„åœ°æ–¹æ„Ÿå—ä¸€ä¸‹è¿™è‚¡å¼‚æ ·ã€‚",
      options: [
        {
          text: "ç»§ç»­å¾€å‰èµ°",
          next: "ch1_event_fortune_teller",
          effects: { energy: -5 }
        }
      ]
    },
  
    {
      id: "ch1_training_area_hub",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ èµ°åˆ°é™„è¿‘ä¸€ä¸ªåºŸå¼ƒçš„å·¥å‚åŒºã€‚\n\n" +
        "è¿™é‡Œå·²ç»å¾ˆä¹…æ²¡äººæ¥äº†ï¼Œä½†ç©ºæ°”ä¸­ä¼¼ä¹è¿˜æ®‹ç•™ç€æŸç§èƒ½é‡æ³¢åŠ¨ã€‚\n\n" +
        "ä½ æ·±å¸ä¸€å£æ°”ï¼Œæ„Ÿè§‰è¿™é‡Œçš„é˜´æ°”å¾ˆé‡ï¼Œæ˜¯æ»‹å…»é­”ç‰©çš„æ¸©åºŠâ€”â€”" +
        "ä½†ä¹Ÿæ­£å› å¦‚æ­¤ï¼Œè¿™é‡Œéå¸¸é€‚åˆä¿®ä»™è€…ç£¨ç»ƒæŠ€è‰ºã€‚\n\n" +
        "å‡»è´¥è¿™é‡Œçš„é˜´å½±ï¼Œä¸ä»…èƒ½è·å¾—ç»éªŒï¼Œè¿˜èƒ½è·å¾—çµçŸ³å’Œç‚¼å™¨ææ–™ã€‚",
      options: [
        {
          text: "ğŸ‘Š å¼€å§‹åˆ·æ€ª (è·å¾—ç»éªŒ/çµçŸ³/ç´ æ)",
          next: "ch1_training_battle",
          effects: { energy: -5 }
        },
        {
          text: "åœ¨å·¥å‚å¤–å›´æ¢ç´¢ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰é—æ¼çš„ç‰©å“",
          next: "ch1_training_find_item",
          effects: { energy: -5 }
        },
        {
          text: "ç¦»å¼€è¿™é‡Œï¼Œè¿”å›è¡—å¤´",
          next: "ch1_street_random_hub",
          effects: { energy: -5 }
        }
      ]
    },
    {
      id: "ch1_training_battle",
      type: "battle",
      speaker: "æ—ç™½",
      text:
        "ä½ æ·±å…¥å·¥å‚ï¼Œå¾ˆå¿«å°±æœ‰é˜´å½±ä»æš—å¤„æµ®ç°ã€‚\n\n" +
        "è¿™äº›é˜´å½±ä¼¼ä¹æ¯”è¡—ä¸Šçš„æ›´å¼ºä¸€äº›ï¼Œä½†å‡»è´¥å®ƒä»¬èƒ½è·å¾—ä¸é”™çš„ç»éªŒå’Œé‡‘å¸ã€‚",
      enemyId: "subway_shadow",
      options: [
        {
          text: "æˆ˜æ–—ï¼",
          next: "ch1_training_after_battle",
          effects: { energy: -10 }
        }
      ]
    },
    {
      id: "ch1_training_after_battle",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ å‡»è´¥äº†é˜´å½±ï¼Œæ„Ÿè§‰ä½“å†…çš„çµåŠ›æ›´åŠ æ´»è·ƒäº†ã€‚\n\n" +
        "è¿™é‡Œä¼¼ä¹æ˜¯ä¸ªä¸é”™çš„ç»ƒçº§åœ°ç‚¹ï¼Œå¯ä»¥åå¤æŒ‘æˆ˜æ¥æå‡ç­‰çº§å’Œè·å–é‡‘å¸ã€‚",
      options: [
        {
          text: "ç»§ç»­åœ¨è¿™é‡Œç»ƒçº§ï¼ˆå¯é‡å¤ï¼‰",
          next: "ch1_training_battle",
          effects: { exp: 5, energy: -5 }
        },
        {
          text: "åœ¨å·¥å‚é‡Œæ¢ç´¢ï¼Œå¯»æ‰¾ç‰©å“",
          next: "ch1_training_find_item",
          effects: { energy: -5 }
        },
        {
          text: "ç¦»å¼€å·¥å‚ï¼Œå»å…¶ä»–åœ°æ–¹",
          next: "ch1_training_area_hub",
          effects: { energy: -5 }
        },
        {
          text: "å›å‡ºç§Ÿå±‹ä¼‘æ•´",
          next: "ch1_rental_night_cultivate",
          effects: { energy: -5 }
        }
      ]
    },
    {
      id: "ch1_training_find_item",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ åœ¨å·¥å‚å¤–å›´ä»”ç»†æœç´¢ï¼Œåœ¨ä¸€ä¸ªåºŸå¼ƒçš„å‚¨ç‰©æŸœé‡Œå‘ç°äº†ä¸€äº›ä¸œè¥¿ã€‚\n\n" +
        "è™½ç„¶éƒ½æ˜¯äº›æ—§ç‰©ï¼Œä½†å…¶ä¸­ä¸€ä»¶ä¼¼ä¹è¿˜èƒ½ç”¨ã€‚",
      options: [
        {
          text: "æ‰¾åˆ°ä¸€ä»¶æ—§å¤–å¥—ï¼Œè™½ç„¶ç ´ä½†è¿˜èƒ½ç©¿",
          next: "ch1_training_area_hub",
          effects: { item: { id: "cheap_armor", count: 1 }, exp: 10 }
        },
        {
          text: "æ‰¾åˆ°ä¸€ä¸ªç®€å•çš„æŠ¤èº«ç¬¦ï¼Œä¼¼ä¹æœ‰ç‚¹ç‰¹æ®Š",
          next: "ch1_training_area_hub",
          effects: { item: { id: "talisman", count: 1 }, exp: 10 }
        },
        {
          text: "åªæ‰¾åˆ°ä¸€äº›åºŸæ–™ï¼Œå–äº†æ¢ç‚¹é’±",
          next: "ch1_training_area_hub",
          effects: { gold: 10, exp: 5 }
        }
      ],
      // åŠ¨æ€ä¿®æ”¹é€‰é¡¹æ–‡æœ¬ï¼ˆå¦‚æœå·²æœ‰è£…å¤‡ï¼‰
      dynamicOptions: function() {
          const hasArmor = Game.State.getItemCount("cheap_armor") > 0;
          const hasTalisman = Game.State.getItemCount("talisman") > 0;
          
          if (hasArmor || hasTalisman) {
              // å¦‚æœå·²æœ‰è£…å¤‡ï¼Œä¿®æ”¹å¯¹åº”é€‰é¡¹çš„æ–‡æœ¬
              const newOptions = [];
              
              if (hasArmor) {
                  newOptions.push({
                      text: "ä½ å·²ç»æœ‰äº†è¿™ä»¶æ—§å¤–å¥—",
                      next: "ch1_training_area_hub",
                      effects: { exp: 5 },
                      disabled: true
                  });
              } else {
                  newOptions.push({
                      text: "æ‰¾åˆ°ä¸€ä»¶æ—§å¤–å¥—ï¼Œè™½ç„¶ç ´ä½†è¿˜èƒ½ç©¿",
                      next: "ch1_training_area_hub",
                      effects: { item: { id: "cheap_armor", count: 1 }, exp: 10 }
                  });
              }
              
              if (hasTalisman) {
                  newOptions.push({
                      text: "ä½ å·²ç»æœ‰äº†è¿™ä¸ªæŠ¤èº«ç¬¦",
                      next: "ch1_training_area_hub",
                      effects: { exp: 5 },
                      disabled: true
                  });
              } else {
                  newOptions.push({
                      text: "æ‰¾åˆ°ä¸€ä¸ªç®€å•çš„æŠ¤èº«ç¬¦ï¼Œä¼¼ä¹æœ‰ç‚¹ç‰¹æ®Š",
                      next: "ch1_training_area_hub",
                      effects: { item: { id: "talisman", count: 1 }, exp: 10 }
                  });
              }
              
              newOptions.push({
                  text: "åªæ‰¾åˆ°ä¸€äº›åºŸæ–™ï¼Œå–äº†æ¢ç‚¹é’±",
                  next: "ch1_training_area_hub",
                  effects: { gold: 10, exp: 5 }
              });
              
              return newOptions;
          }
          return null; // ä½¿ç”¨é»˜è®¤é€‰é¡¹
      }
    },
    {
      id: "ch1_street_random_hub",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ ç«™åœ¨è¡—è§’ï¼Œçœ‹ç€è¿™åº§åŸå¸‚åœ¨å¤œè‰²ä¸­æ¸æ¸äº®èµ·ç¯ç«ã€‚\n\n" +
        "ç©ºæ°”ä¸­é‚£ç§å¼‚æ ·çš„æµåŠ¨æ„Ÿä¼¼ä¹æ›´æ˜æ˜¾äº†ï¼Œä½ æ„Ÿè§‰è¿™é‡Œéšè—ç€è®¸å¤šç§˜å¯†ã€‚\n\n" +
        "ç°åœ¨ä½ å·²ç»æœ‰äº†æŠ€èƒ½ä¹¦å’Œçµå…½ï¼Œæ˜¯æ—¶å€™å†³å®šæ¥ä¸‹æ¥è¦å»å“ªé‡Œäº†ã€‚",
      options: [
        {
          text: "âš”ï¸ [ç»ƒçº§] æ·±å…¥åºŸå¼ƒå·¥å‚ (åˆ·æ€ª/ç´ æ)",
          next: "ch1_training_area_hub",
          effects: { energy: -5 }
        },
        {
          text: "ğŸ· [ä¸»çº¿] å»èµ´çº¢å§çš„çº¦",
          next: "ch1_party_1",
          effects: { energy: -5 }
        },
        {
          text: "ğŸ² éšä¾¿é€›é€› (éšæœºäº‹ä»¶)",
          next: "ch1_explore_random",
          effects: { energy: -5 }
        }
      ]
    },
    // ===== éšæœºæ¢ç´¢äº‹ä»¶ï¼ˆå¥½è¿/éœ‰è¿ï¼‰ =====
    {
      id: "ch1_explore_random",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ æ‹è¿›ä¸€æ¡ä¸èµ·çœ¼çš„å°å··ï¼Œæƒ³çœ‹çœ‹èƒ½ä¸èƒ½å‘ç°ä»€ä¹ˆã€‚\n\n" +
        "è¿™é‡Œæ¯”ä¸»è¡—å®‰é™å¾—å¤šï¼Œåªæœ‰å¶å°”ä¼ æ¥çš„è„šæ­¥å£°å’Œè¿œå¤„è½¦è¾†çš„é¸£ç¬›ã€‚",
      options: [
        { text: "ç»§ç»­æ¢ç´¢", next: "ch1_explore_random_result", effects: { energy: -5 } }
      ]
    },
    {
      id: "ch1_explore_random_result",
      type: "story",
      speaker: "æ—ç™½",
      text: "",
      options: [],
      // åŠ¨æ€ç”Ÿæˆéšæœºç»“æœ
      dynamicText: function() {
          // éšæœºé€‰æ‹©å¥½è¿æˆ–éœ‰è¿äº‹ä»¶
          const random = Math.random();
          if (random < 0.4) {
              // å¥½è¿äº‹ä»¶ï¼ˆ40%æ¦‚ç‡ï¼‰
              const luckyEvents = [
                  "ch1_event_lucky_talisman_water",
                  "ch1_event_lucky_spirit_stone",
                  "ch1_event_lucky_old_man"
              ];
              // å¦‚æœè¿˜æ²¡æœ‰çµå…½ï¼Œæ·»åŠ æ•‘çŒ«äº‹ä»¶
              if (!Game.State.pet.active) {
                  luckyEvents.push("ch1_event_save_cat");
              }
              const selectedEvent = luckyEvents[Math.floor(Math.random() * luckyEvents.length)];
              return selectedEvent;
          } else if (random < 0.5) {
              // æ‰“å·¥äº‹ä»¶ï¼ˆ10%æ¦‚ç‡ï¼‰
              return "ch1_event_part_time_job";
          } else {
              // éœ‰è¿äº‹ä»¶ï¼ˆ50%æ¦‚ç‡ï¼‰
              const unluckyEvents = [
                  "ch1_event_unlucky_electric",
                  "ch1_event_unlucky_ball",
                  "ch1_event_unlucky_rat"
              ];
              const selectedEvent = unluckyEvents[Math.floor(Math.random() * unluckyEvents.length)];
              return selectedEvent;
          }
      }
    },
    // å¥½è¿äº‹ä»¶1ï¼šæ¡åˆ°ç“¶è£…ç¬¦æ°´
    {
      id: "ch1_event_lucky_talisman_water",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ åœ¨å··å­è§’è½é‡Œå‘ç°äº†ä¸€ä¸ªå°ç“¶å­ï¼Œé‡Œé¢è£…ç€æ·¡è“è‰²çš„æ¶²ä½“ã€‚\n\n" +
        "ç“¶èº«ä¸Šè´´ç€å¼ é»„çº¸ç¬¦ï¼Œè™½ç„¶å·²ç»æœ‰äº›è¤ªè‰²ï¼Œä½†ä¾ç„¶èƒ½æ„Ÿå—åˆ°å¾®å¼±çš„çµåŠ›æ³¢åŠ¨ã€‚\n\n" +
        "çœ‹èµ·æ¥æ˜¯æŸä¸ªæ•£ä¿®ç•™ä¸‹çš„ç¬¦æ°´ï¼Œè™½ç„¶ä¸æ˜¯ä»€ä¹ˆçè´µçš„ä¸œè¥¿ï¼Œä½†å¯¹ä½ æ¥è¯´ä¹Ÿç®—æ˜¯ä¸ªå°æ”¶è·ã€‚",
      options: [
        {
          text: "æ”¶ä¸‹è¿™ç“¶ç¬¦æ°´",
          next: "ch1_street_random_hub",
          effects: { item: { id: "bottled_talisman_water", count: 1 }, exp: 5 }
        }
      ]
    },
    // å¥½è¿äº‹ä»¶2ï¼šæ¡åˆ°ç ´ç¢çµçŸ³ç¢ç‰‡
    {
      id: "ch1_event_lucky_spirit_stone",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ åœ¨ä¸€å †åºŸå¼ƒçš„æ‚ç‰©ä¸­å‘ç°äº†ä¸€å—å‘ç€å¾®å…‰çš„ç¢ç‰‡ã€‚\n\n" +
        "æ‹¿èµ·æ¥ä»”ç»†ä¸€çœ‹ï¼Œæ˜¯ä¸€å—ç ´ç¢çš„çµçŸ³ç¢ç‰‡ï¼Œè™½ç„¶å·²ç»æ®‹ç ´ä¸å ªï¼Œä½†ä¾ç„¶èƒ½æ„Ÿå—åˆ°å…¶ä¸­è•´å«çš„å¾®å¼±çµåŠ›ã€‚\n\n" +
        "ä½ è¯•ç€å°†å®ƒè´´è¿‘èƒ¸å£ï¼Œæ„Ÿè§‰ä½“å†…çš„çµåŠ›ä¼¼ä¹æ´»è·ƒäº†ä¸€äº›ã€‚\n\n" +
        "è™½ç„¶æ•ˆæœå¾®å¼±ï¼Œä½†è£…å¤‡ååº”è¯¥èƒ½ç¼“æ…¢æ¢å¤çµåŠ›ã€‚",
      options: [
        {
          text: "æ”¶ä¸‹è¿™å—çµçŸ³ç¢ç‰‡",
          next: "ch1_street_random_hub",
          effects: { item: { id: "broken_spirit_stone", count: 1 }, exp: 8 }
        }
      ],
      // é˜²æ­¢é‡å¤è·å¾—
      dynamicOptions: function() {
          const hasStone = Game.State.getItemCount("broken_spirit_stone") > 0;
          if (hasStone) {
              return [
                  {
                      text: "ä½ å·²ç»æœ‰äº†è¿™å—çµçŸ³ç¢ç‰‡",
                      next: "ch1_street_random_hub",
                      effects: { exp: 3 },
                      disabled: true
                  }
              ];
          }
          return null;
      }
    },
    // å¥½è¿äº‹ä»¶3ï¼šé‡åˆ°æ•£ä¿®é›ç‹—å¤§çˆ·
    {
      id: "ch1_event_lucky_old_man",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ èµ°åˆ°å··å£ï¼Œçœ‹åˆ°ä¸€ä¸ªè€å¤§çˆ·æ­£åœ¨é›ç‹—ã€‚\n\n" +
        "é‚£åªç‹—çœ‹èµ·æ¥æ™®é€šï¼Œä½†è€å¤§çˆ·èº«ä¸Šå´æ•£å‘ç€ä¸€ç§è¯´ä¸å‡ºçš„æ°”æ¯â€”â€”" +
        "ä¸æ˜¯çµåŠ›ï¼Œæ›´åƒæ˜¯â€¦â€¦æŸç§æ²‰æ·€äº†å¾ˆä¹…çš„ä¿®è¡Œè€…çš„æ„Ÿè§‰ã€‚\n\n" +
        "ä»–æ³¨æ„åˆ°ä½ åœ¨çœ‹ä»–ï¼Œç¬‘äº†ç¬‘ï¼Œä»å£è¢‹é‡Œæå‡ºä¸€å¼ é»„çº¸ç¬¦ï¼š\n" +
        "ã€Œå°ä¼™å­ï¼Œçœ‹ä½ èº«ä¸Šæœ‰ç‚¹çµæ°”ï¼Œè¿™ä¸ªç»™ä½ ã€‚è™½ç„¶ä¸æ˜¯ä»€ä¹ˆå¥½ä¸œè¥¿ï¼Œä½†å…³é”®æ—¶åˆ»èƒ½æŒ¡ä¸€æ¬¡ç¾ã€‚ã€\n\n" +
        "ä½ æ¥è¿‡ç¬¦çº¸ï¼Œæ„Ÿè§‰ä¸Šé¢ç¡®å®æœ‰å¾®å¼±çš„çµåŠ›æ³¢åŠ¨ã€‚",
      options: [
        {
          text: "é“è°¢åæ”¶ä¸‹æŠ¤èº«ç¬¦",
          next: "ch1_street_random_hub",
          effects: { item: { id: "one_time_protection_talisman", count: 1 }, exp: 10 }
        }
      ],
      // é˜²æ­¢é‡å¤è·å¾—
      dynamicOptions: function() {
          const hasTalisman = Game.State.getItemCount("one_time_protection_talisman") > 0;
          const hasProtection = Game.State.hasOneTimeProtection;
          if (hasTalisman || hasProtection) {
              return [
                  {
                      text: "å¤§çˆ·æ‘†æ‘†æ‰‹ï¼š\"ä½ å·²ç»æœ‰äº†ï¼Œå¥½å¥½ç”¨å§ã€‚\"",
                      next: "ch1_street_random_hub",
                      effects: { exp: 5 },
                      disabled: true
                  }
              ];
          }
          return null;
      }
    },
    // éœ‰è¿äº‹ä»¶1ï¼šè¢«è·¯ç¯æ¼ç”µç”µäº†ä¸€ä¸‹
    {
      id: "ch1_event_unlucky_electric",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ è·¯è¿‡ä¸€æ ¹è·¯ç¯æ†æ—¶ï¼Œçªç„¶æ„Ÿè§‰æ‰‹ä¸Šä¸€é˜µåˆºç—›ã€‚\n\n" +
        "ã€Œå˜¶â€”â€”ã€ä½ èµ¶ç´§ç¼©å›æ‰‹ï¼Œå‘ç°è·¯ç¯æ†ä¸Šæœ‰è½»å¾®çš„æ¼ç”µã€‚\n\n" +
        "è™½ç„¶åªæ˜¯è½»å¾®çš„ç”µæµï¼Œä½†å¥‡æ€ªçš„æ˜¯ï¼Œä½ æ„Ÿè§‰ä½“å†…çš„çµåŠ›ä¼¼ä¹è¢«è¿™è‚¡ç”µæµæ¿€æ´»äº†ï¼Œ" +
        "åè€Œå˜å¾—æ´»è·ƒäº†ä¸€äº›ã€‚\n\n" +
        "çœ‹æ¥ä¿®ä»™ä½“è´¨å¯¹ç”µç¡®å®æ¯”è¾ƒæ•æ„Ÿâ€¦â€¦è™½ç„¶è¢«ç”µäº†ä¸€ä¸‹ï¼Œä½†çµåŠ›åè€Œå¢åŠ äº†ã€‚",
      options: [
        {
          text: "æ‰æ‰æ‰‹ï¼Œç»§ç»­å¾€å‰èµ°",
          next: "ch1_street_random_hub",
          effects: { hp: -10, mp: 5, exp: 5 }
        }
      ]
    },
    // éœ‰è¿äº‹ä»¶2ï¼šè¢«å°å­©è¸¢çƒæ’äº†
    {
      id: "ch1_event_unlucky_ball",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ æ­£èµ°ç€ï¼Œçªç„¶å¬åˆ°ä¸€å£°ã€Œå°å¿ƒï¼ã€\n\n" +
        "è¿˜æ²¡ååº”è¿‡æ¥ï¼Œä¸€ä¸ªè¶³çƒå°±ç ¸åˆ°äº†ä½ èº«ä¸Šï¼Œç´§æ¥ç€ä¸€ä¸ªå°å­©å†²è¿‡æ¥æ¡çƒï¼Œ" +
        "ä¸å°å¿ƒæ’åˆ°äº†ä½ ã€‚\n\n" +
        "ã€Œå¯¹ä¸èµ·å¯¹ä¸èµ·ï¼ã€å°å­©æ¡èµ·çƒå°±è·‘ï¼Œä½ æ‘¸äº†æ‘¸è¢«æ’çš„åœ°æ–¹ï¼Œ" +
        "å‘ç°å£è¢‹é‡Œçš„é›¶é’±æ‰äº†å‡ å—ã€‚\n\n" +
        "è™½ç„¶æ²¡ä»€ä¹ˆå¤§ç¢ï¼Œä½†ç¡®å®æœ‰ç‚¹å€’éœ‰ã€‚",
      options: [
        {
          text: "æ¡èµ·æ‰è½çš„é›¶é’±ï¼Œç»§ç»­å¾€å‰èµ°",
          next: "ch1_street_random_hub",
          effects: { gold: -15, exp: 3 }
        }
      ]
    },
    // éœ‰è¿äº‹ä»¶3ï¼šè¢«è€é¼ å“åˆ°
    {
      id: "ch1_event_unlucky_rat",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ èµ°åˆ°ä¸€ä¸ªåƒåœ¾æ¡¶æ—è¾¹ï¼Œçªç„¶ä»é‡Œé¢çªœå‡ºä¸€åªå¤§è€é¼ ã€‚\n\n" +
        "è™½ç„¶ä½ å·²ç»æ˜¯ä¿®ä»™è€…äº†ï¼Œä½†çªç„¶å‡ºç°çš„é»‘å½±è¿˜æ˜¯è®©ä½ å“äº†ä¸€è·³ï¼Œ" +
        "æ•´ä¸ªäººå¾€åé€€äº†ä¸€æ­¥ã€‚\n\n" +
        "è€é¼ å¾ˆå¿«è·‘æ‰äº†ï¼Œä½†ä½ å¿ƒé‡Œå´æœ‰ç§è¯´ä¸å‡ºçš„æŒ«è´¥æ„Ÿâ€”â€”" +
        "å ‚å ‚ä¿®ä»™è€…ï¼Œå±…ç„¶è¢«ä¸€åªè€é¼ å“åˆ°äº†ã€‚\n\n" +
        "è¿™ç§å¤±è´¥æ„Ÿå¯èƒ½ä¼šå½±å“ä½ æ¥ä¸‹æ¥çš„æˆ˜æ–—å¿ƒæ€ã€‚",
      options: [
        {
          text: "æ‘‡æ‘‡å¤´ï¼Œç»§ç»­å¾€å‰èµ°",
          next: "ch1_street_random_hub",
          effects: { failureCount: 1, exp: 2 }
        }
      ]
    },
    // å¥½è¿äº‹ä»¶4ï¼šé›¨å¤œæ•‘çŒ«ï¼ˆè·å¾—ç¥å…½ï¼‰
    {
      id: "ch1_event_save_cat",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ å¾ªç€å£°éŸ³æ‰¾è¿‡å»ï¼Œåœ¨ä¸€ä¸ªè¢«é›¨æ°´æ‰“æ¹¿çš„çº¸ç®±é‡Œï¼Œå‘ç°äº†ä¸€åªç™½è‰²çš„å°çŒ«ã€‚\n\n" +
        "å®ƒçœ‹èµ·æ¥åªæœ‰å‡ ä¸ªæœˆå¤§ï¼Œæµ‘èº«æ¹¿é€ï¼Œçœ¼ç¥é‡Œå´é€ç€ä¸€ç§è¯´ä¸å‡ºçš„å¨ä¸¥ã€‚\n\n" +
        "ä½ è¹²ä¸‹èº«ï¼Œå°çŒ«æŠ¬å¤´çœ‹äº†ä½ ä¸€çœ¼ï¼Œæ²¡æœ‰é€ƒè·‘ï¼Œåè€Œè½»è½»å«äº†ä¸€å£°ã€‚\n\n" +
        "ã€Œâ€¦â€¦ç®—äº†ï¼Œæ€»ä¸èƒ½è§æ­»ä¸æ•‘ã€‚ã€",
      options: [
        {
          text: "æŠŠå°çŒ«æŠ±èµ·æ¥ï¼Œå¸¦å›å‡ºç§Ÿå±‹",
          next: "ch1_event_save_cat_result",
          effects: { exp: 10 }
        }
      ]
    },
    {
      id: "ch1_event_save_cat_result",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ æŠŠå°ç™½çŒ«æŠ±åœ¨æ€€é‡Œï¼Œå®ƒä¼¼ä¹å¾ˆæœ‰çµæ€§ï¼Œè¹­äº†è¹­ä½ çš„æ‰‹è‡‚ã€‚\n\n" +
        "æ­¤æ—¶ï¼Œä½ æŠ¬å¤´çœ‹åˆ°äº†ä¸è¿œå¤„çš„åºŸå¼ƒå·¥å‚ï¼Œé‚£é‡Œæ•£å‘ç€æµ“éƒçš„é˜´æ°”ã€‚",
      options: [
        {
          text: "ç»™å®ƒèµ·å'å°ç™½'ï¼Œå¹¶æŸ¥çœ‹åºŸå¼ƒå·¥å‚",
          action: function() {
              // æ¿€æ´»ç¥å…½
              Game.State.pet = {
                  active: true,
                  id: "white_tiger_cub",
                  level: 1,
                  exp: 0,
                  name: "å°ç™½",
                  affinity: 0
              };
              if (Game.Save) Game.Save.save();
              Game.UI.renderHomeCards();
              
              // å¼ºåˆ¶è·³è½¬ç»ƒçº§å¼•å¯¼
              Game.Game.goToEvent("ch1_training_area_intro");
          }
        }
      ]
    },
    // ç»ƒçº§ç‚¹å¼•å¯¼äº‹ä»¶
    {
      id: "ch1_training_area_intro",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "æ€€é‡ŒæŠ±ç€å°ç™½ï¼Œæ‰‹é‡Œæ£ç€ç§˜ç±ï¼Œä½ æ„Ÿè§‰æ›´æœ‰åº•æ°”äº†ã€‚\n\n" +
        "ä½ æŠ¬å¤´çœ‹å‘ä¸è¿œå¤„çš„åºŸå¼ƒå·¥å‚ï¼Œé‚£é‡Œé˜´æ°”å¼¥æ¼«ï¼Œæ­£æ˜¯ç£¨ç»ƒåˆšåˆšå­¦ä¼šçš„æ³•æœ¯çš„å¥½åœ°æ–¹ã€‚",
      options: [
        {
          text: "ğŸ‘Š æ˜ç™½äº†ï¼Œå»è¡—å¤´æ¢çº½å‡†å¤‡è¡ŒåŠ¨",
          next: "ch1_street_random_hub",
          effects: { exp: 5 }
        }
      ]
    },
    // æ‰“å·¥äº‹ä»¶ï¼šä¸‹æ”¾åˆ°æ¢ç´¢éšæœºäº‹ä»¶
    {
      id: "ch1_event_part_time_job",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ åœ¨è¡—å¤´çœ‹åˆ°ä¸€å®¶å°åº—é—¨å£è´´ç€ã€Œæ‹›ä¸´æ—¶å·¥ã€çš„å‘Šç¤ºã€‚\n\n" +
        "è€æ¿æ˜¯ä¸ªä¸­å¹´å¤§å”ï¼Œçœ‹åˆ°ä½ åœ¨çœ‹å‘Šç¤ºï¼Œä¸»åŠ¨èµ°è¿‡æ¥ï¼š\n" +
        "ã€Œå°ä¼™å­ï¼Œè¦ä¸è¦æ¥å¹²ç‚¹æ´»ï¼ŸæŒ‰å°æ—¶ç®—ï¼Œä¸ç´¯ï¼Œå°±æ˜¯æœ‰ç‚¹æ¯ç‡¥ã€‚ã€\n\n" +
        "ä½ çœ‹äº†çœ‹å‘Šç¤ºä¸Šçš„æ—¶è–ªï¼Œè™½ç„¶ä¸é«˜ï¼Œä½†ç¡®å®èƒ½èµšç‚¹é›¶èŠ±é’±ã€‚",
      options: [
        {
          text: "å¹²äº†ï¼",
          action: function() {
              const player = Game.State.player;
              
              // æ£€æŸ¥ç²¾åŠ›æ˜¯å¦è¶³å¤Ÿ
              if (player.energy < 20) {
                  alert("å¤ªç´¯äº†ï¼Œå…ˆä¼‘æ¯ä¸€ä¸‹å§ã€‚");
                  Game.Game.goToEvent("ch1_street_random_hub");
                  return;
              }
              
              // æ¶ˆè€—20ç‚¹ç²¾åŠ›
              player.energy = Math.max(0, player.energy - 20);
              
              // è·å¾—300~500éšæœºäººæ°‘å¸
              const moneyEarned = 300 + Math.floor(Math.random() * 201); // 300-500
              player.money = (player.money || 0) + moneyEarned;
              
              // éšæœºæ‰“å·¥è¶£äº‹æ–‡æ¡ˆ
              const workMessages = [
                  "é€äº†ä¸€æ™šä¸Šå¤–å–ï¼Œè…¿éƒ½è·‘æ–­äº†",
                  "åœ¨ç½‘å§å½“ç½‘ç®¡ï¼Œé¡ºä¾¿è¹­äº†ä¼šå„¿ç½‘",
                  "å¸®äººå†™ä»£ç ï¼Œå¤´å‘æ‰äº†ä¸€æŠŠ",
                  "åœ¨ä¾¿åˆ©åº—å€¼å¤œç­ï¼Œçœ‹äº†ä¸å°‘æ·±å¤œæ•…äº‹",
                  "è·‘è…¿é€æ–‡ä»¶ï¼Œé¡ºä¾¿ç†Ÿæ‚‰äº†å—æ˜Œçš„å¤§è¡—å°å··",
                  "åœ¨é¤å…ç«¯ç›˜å­ï¼Œå­¦ä¼šäº†çœ‹äººè„¸è‰²",
                  "åšä¸´æ—¶å·¥æ¬è´§ï¼Œç»ƒå‡ºäº†ä¸€èº«åŠ›æ°”"
              ];
              const message = workMessages[Math.floor(Math.random() * workMessages.length)];
              
              alert(`${message}\n\nè·å¾— Â¥${moneyEarned} äººæ°‘å¸\næ¶ˆè€— 20 ç‚¹ç²¾åŠ›`);
              
              // æ›´æ–°UI
              Game.Game.updateUI();
              
              // è‡ªåŠ¨å­˜æ¡£
              if (Game.Save) {
                  Game.Save.save();
              }
              
              // è¿”å›æ¢ç´¢ä¸­å¿ƒ
              Game.Game.goToEvent("ch1_street_random_hub");
          }
        },
        {
          text: "ç®—äº†ï¼Œè¿˜æ˜¯ç»§ç»­æ¢ç´¢å§",
          next: "ch1_street_random_hub",
          effects: { exp: 2 }
        }
      ]
    },
    {
      id: "ch1_event_unlucky_fall",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "å°å··çš„å°é˜¶è¢«é›¨æ°´æ‰“å¾—å¾ˆæ»‘ï¼Œä½ ä¸€è„šè¸©ç©ºï¼Œæ•´ä¸ªäººå·®ç‚¹ç‹—åƒå±åœ°æ‘”ä¸‹å»ã€‚\n\n" +
        "å¥½åœ¨ä½ åŠæ—¶æŠ“ä½äº†æ‰¶æ‰‹ï¼Œè¿˜æ˜¯ç£•æ‰äº†ä¸€ç‚¹çš®ï¼Œå£è¢‹é‡Œçš„é›¶é’±ä¹Ÿæ’’äº†ä¸€åœ°ã€‚\n\n" +
        "ä½ ä¸€è¾¹æ¡é’±ï¼Œä¸€è¾¹æš—æš—å‘èª“ä»¥åä¿®ç‚¼åˆ°æŸä¸ªå¢ƒç•Œï¼Œä¸€å®šè¦ç»™è¿™é‡Œé“ºç¬¦æ–‡é˜²æ»‘ç –ã€‚",
      options: [
        {
          text: "æ‹æ‹èº«ä¸Šçš„ç°ï¼Œç»§ç»­å¾€å‰èµ°",
          next: "ch1_street_battle_intro",
          effects: { hp: -15, gold: -10, exp: 5 }
        },
        {
          text: "è§‰å¾—ä»Šå¤©è¿æ°”ä¸å¤ªè¡Œï¼Œè¿˜æ˜¯å…ˆå›å‡ºç§Ÿå±‹",
          next: "ch1_rental_night_cultivate",
          effects: { hp: -10, gold: -5 }
        }
      ]
    },
    {
      id: "ch1_event_lucky_money",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "å¤©æ¡¥ä¸Šé£å¾ˆå¤§ï¼Œä½ é åœ¨æ æ†ä¸Šçœ‹è½¦æµï¼Œçªç„¶æœ‰äººä»ä½ èº«è¾¹åŒ†åŒ†è·‘è¿‡ï¼Œ" +
        "è£¤å…œé‡Œæ‰å‡ºä¸€ä¸ªçº¢è‰²å°ä¿¡å°ï¼Œå±…ç„¶æ²¡äººå‘ç°ã€‚\n\n" +
        "ä½ æ¡èµ·æ¥ï¼Œé‡Œé¢åªæœ‰å‡ å¼ é›¶é’±å’Œä¸€å¼ å†™ç€\"æ„¿æ–°ç”Ÿæ´»é¡ºåˆ©\"çš„å°çº¸æ¡ã€‚\n\n" +
        "ä½ çŠ¹è±«äº†ä¸€ä¸‹ï¼Œè¿˜æ˜¯æŠŠä¿¡å°æ”¶å¥½â€”â€”æ¯•ç«Ÿï¼Œæ–°ç”Ÿæ´»ç¡®å®éœ€è¦ä¸€ç‚¹å¥½è¿ã€‚",
      options: [
        {
          text: "æŠŠé’±æ”¶ä¸‹ï¼Œé¡ºä¾¿æ„Ÿè°¢è¿™ä»½æ¥è·¯ä¸æ˜çš„ç¥ç¦",
          next: "ch1_street_battle_intro",
          effects: { gold: 30, exp: 10 }
        }
      ]
    },
    {
      id: "ch1_event_riverside_hint",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "æ²³è¾¹çš„é£æ¯”è¡—ä¸Šå†·ä¸€äº›ï¼Œæ°´é¢ä¸Šæ¼‚ç€é›¶æ•£çš„ç¯å…‰å€’å½±ã€‚\n\n" +
        "ä½ é åœ¨æ æ†ä¸Šç«™äº†ä¸€ä¼šå„¿ï¼Œå‘ç°èƒ¸å£é‚£å›¢çµåŠ›åœ¨è¿™é‡Œæ›´å®‰é™ï¼Œä¹Ÿæ›´æ¸…æ™°ã€‚\n\n" +
        "ä½ éšçº¦æ„Ÿè§‰åˆ°ï¼šè¿™åº§åŸå¸‚çš„æ°´ç³»é‡Œè—ç€æŸç§å¤è€çš„ä¸œè¥¿ï¼Œåªæ˜¯ç°åœ¨è¿˜å¤Ÿä¸åˆ°ã€‚",
      options: [
        {
          text: "è®°ä¸‹è¿™ç§æ„Ÿè§‰ï¼Œå“ªå¤©æ¥è¿™é‡Œä¸“é—¨ä¿®ç‚¼ä¸€æ¬¡",
          next: "ch1_street_battle_intro",
          effects: { exp: 10, mp: 5 }
        }
      ]
    },
    {
      id: "ch1_event_fortune_teller",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "é‚£ä¸ªè€å¤´ååœ¨å°é©¬æ‰ä¸Šï¼Œçœ¼ç¥ç²¾å…‰å››å°„ã€‚\n\n" +
        "ã€Œå°ä¼™å­ï¼Œçœ‹ä½ éª¨éª¼æ¸…å¥‡ï¼Œè¿™æœ¬ã€ŠåŸºç¡€çµåŠ›å¼¹ã€‹å°±é€ä½ é˜²èº«å§ã€‚ã€\n\n" +
        "ä»–ä¸ç”±åˆ†è¯´ï¼Œç›´æ¥æŠŠä¸€æœ¬ç ´ä¹¦å¡è¿›ä½ æ€€é‡Œã€‚",
      options: [
        {
          text: "æ”¶ä¸‹ç§˜ç± (è·å¾—æŠ€èƒ½ä¹¦)",
          next: "ch1_event_fortune_teller_get_book",
          effects: { 
              item: { id: "spell_book_qi_blast", count: 1 },
              exp: 15, 
              mp: 10 
          }
        }
      ]
      // ä¸¥ç¦åœ¨æ­¤å¤„æ·»åŠ  dynamicOptionsï¼Œé˜²æ­¢é€»è¾‘å¡æ­»
    },
    {
      id: "ch1_event_fortune_teller_get_book",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ æ‹¿ç€ä¹¦åˆšæƒ³é“è°¢ï¼Œè€å¤´å·²ç»æ”¶æ‘Šä¸è§äº†ã€‚\n\n" +
        "æ­£å½“ä½ ç–‘æƒ‘æ—¶ï¼Œæ—è¾¹çš„å··å­æ·±å¤„çªç„¶ä¼ æ¥ä¸€é˜µå¾®å¼±çš„çŒ«å«å£°â€¦â€¦",
      options: [
        {
          text: "å¾ªç€å£°éŸ³èµ°è¿‡å»",
          next: "ch1_event_save_cat",
          effects: {}
        }
      ]
    },
    {
      id: "ch1_street_battle_intro",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "èµ°åˆ°ä¸€ä¸ªè·¯ç¯æœ‰ç‚¹åçš„å°è·¯å£æ—¶ï¼Œä½ æ‰“äº†ä¸ªå†·æˆ˜ã€‚\n\n" +
        "æ˜æ˜é›¨å£°è¿˜åœ¨ï¼Œè¡—é“å´çªç„¶å®‰é™äº†ä¸€ç¬ã€‚\n\n" +
        "ä½ çœ‹åˆ°è·¯ç¯ä¸‹çš„å½±å­ä¼¼ä¹æ¯”è¡Œäººæœ¬èº«æ›´æ…¢ä¸€æ‹ï¼Œ" +
        "æœ‰ä¸€ä¸ªé»‘å½±ä»åœ°é¢ä¸Šæ‚„æ‚„æŠ¬èµ·å¤´ï¼Œå¯¹ç€ä½ æ‰­æ›²å‡ºä¸€ä¸ªç¬‘ã€‚",
      options: [
        {
          text: "è¿™ä¸å¯¹åŠ²â€¦â€¦å‡†å¤‡æˆ˜æ–—ï¼",
          next: "ch1_street_battle",
          effects: { energy: -10 }
        },
        {
          text: "å½“è‡ªå·±çœ¼èŠ±äº†ï¼Œå¿«é€Ÿç¦»å¼€è¿™é‡Œ",
          next: "ch1_rental_to_evening",
          effects: { hp: -5, exp: 5, energy: -5 }
        }
      ]
    },
  
    {
      id: "ch1_street_battle",
      type: "battle",
      speaker: "æ—ç™½",
      text:
        "é˜´å½±ä»åœ°é¢ä¸Šæ’•è£‚å¼€æ¥ï¼Œåƒæ˜¯æ‰€æœ‰åŠ ç­äººçš„è´Ÿé¢æƒ…ç»ªæ‰åˆ°äº†ä¸€èµ·ã€‚\n\n" +
        "ã€åœ°é“åŠ ç­é˜´å½±ã€‘å‘ä½ æ‰‘æ¥ï¼",
      enemyId: "subway_shadow",
      options: [
        {
          text: "æˆ˜æ–—ï¼",
          next: "ch1_after_street_battle",
          effects: { energy: -10 }
        }
      ]
    },
  
    {
      id: "ch1_after_street_battle",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ å‡ ä¹æ˜¯å‡­æœ¬èƒ½æŒ¥å‡ºé‚£ä¸€ä¸‹ï¼Œä½“å†…é‚£è‚¡åŠ›é‡åœ¨å…³é”®æ—¶åˆ»å¸®äº†ä½ ä¸€æŠŠã€‚\n\n" +
        "é˜´å½±è¢«æ–©å¼€ä¹‹ååƒé›¾ä¸€æ ·æ•£æ‰ï¼Œåªç•™ä¸‹è·¯ç¯ä¸‹æ­£å¸¸çš„åœ°é¢å’Œä¸€ç‚¹å†·æ±—ã€‚\n\n" +
        "ä½ å–˜äº†å‡ å£æ°”ï¼Œå‘ç°è‡ªå·±å¹¶æ²¡æœ‰é‚£ä¹ˆå®³æ€•ï¼Œåè€Œæœ‰ç§å¥‡æ€ªçš„å…´å¥‹â€”â€”" +
        "åŸæ¥â€œæ— è¶£ç”Ÿæ´»â€ä¹‹å¤–ï¼ŒçœŸæœ‰åˆ«çš„ä¸œè¥¿å­˜åœ¨ã€‚",
      options: [
        {
          text: "è®°ä¸‹è¿™æ¬¡æˆ˜æ–—ï¼Œå›å»å¥½å¥½æ•´ç†ä¸€ä¸‹çŠ¶æ€",
          next: "ch1_rental_night_cultivate",
          effects: { exp: 20, gold: 25, energy: -5 }
        },
        {
          text: "å»åºŸå¼ƒå·¥å‚ç»§ç»­ç»ƒçº§ï¼Œæå‡å®åŠ›",
          next: "ch1_training_area_hub",
          effects: { exp: 5, energy: -5 }
        },
        {
          text: "æ—¢ç„¶éƒ½è¿™æ ·äº†ï¼Œä»Šæ™šæ›´è¦å»è§è§çº¢å§",
          next: "ch1_party_1",
          effects: { exp: 10, gold: 20, energy: -5 }
        }
      ]
    },
  
    // ===== 5. ä¿®ç‚¼æç¤ºå…¥å£ =====
    {
      id: "ch1_rental_night_cultivate",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "å›åˆ°å‡ºç§Ÿå±‹ï¼Œä½ æŠŠæ¹¿è¡£æœæŒ‚åœ¨æ¤…èƒŒä¸Šï¼Œæ•´ä¸ªäººæ…¢æ…¢å†·é™ä¸‹æ¥ã€‚\n\n" +
        "é‚£åœºå’Œé˜´å½±çš„æˆ˜æ–—åƒæ¢¦ä¸€æ ·ï¼Œä½ å´èƒ½æ¸…æ¥šè®°å¾—æ¯ä¸€ä¸ªåŠ¨ä½œèƒŒåçµåŠ›æµåŠ¨çš„è½¨è¿¹ã€‚\n\n" +
        "ä½ è¯•ç€ç›˜è…¿åå¥½ï¼Œç…§ç€ç½‘æ–‡é‡Œå†™çš„é‚£æ ·è°ƒæ•´å‘¼å¸ã€‚\n" +
        "æ„å¤–çš„æ˜¯â€”â€”é‚£è‚¡åŠ›é‡çœŸçš„ä¼šå›åº”ä½ ã€‚\n\n" +
        "ï¼ˆæç¤ºï¼šåœ¨å‡ºç§Ÿå±‹ä¸»ç•Œé¢ç‚¹å‡» [ğŸ§˜ æ‰“åä¿®ç‚¼] å³å¯æå‡å®åŠ›ã€‚ä¿®ç‚¼éœ€è¦æ¶ˆè€—ç²¾åŠ›å’ŒçµçŸ³ã€‚ï¼‰",
      options: [
        {
          text: "ç»§ç»­æ‰“åä¿®ç‚¼ä¸€ä¼šå„¿",
          next: "ch1_cultivate_intro",
          effects: { exp: 10, mp: 10, energy: -2 }
        },
        {
          text: "å»åºŸå¼ƒå·¥å‚ç»ƒçº§ï¼Œæå‡å®åŠ›",
          next: "ch1_training_area_hub",
          effects: { energy: -5 }
        },
        {
          text: "å…ˆæ•´ç†ä¸€ä¸‹èƒŒåŒ…å’Œè£…å¤‡",
          next: "ch1_menu_hint",
          effects: { energy: -2 }
        },
        {
          text: "æ—¶é—´å·®ä¸å¤šäº†ï¼Œå»èµ´çº¢å§çš„çº¦",
          next: "ch1_party_1",
          effects: { energy: -5 }
        }
      ]
    },
  
    {
      id: "ch1_cultivate_intro",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ é—­ä¸Šçœ¼ï¼Œå‘¼å¸å˜å¾—å¹³ç¨³ï¼ŒçµåŠ›åœ¨èº«ä½“é‡Œç»•äº†ä¸€åœˆåˆä¸€åœˆã€‚\n\n" +
        "å®ƒä¼¼ä¹è¿˜å¾ˆç¨šå«©ï¼Œä½†å·²ç»ä¸å†æ˜¯å®Œå…¨ä¸å¯æ§çš„é™Œç”Ÿå­˜åœ¨ã€‚\n\n" +
        "ä½ éšçº¦æ„è¯†åˆ°ï¼Œè¿™å¯èƒ½å°±æ˜¯æ‰€è°“çš„ã€çµæ ¹ã€‘åœ¨è‹é†’ã€‚\n\n" +
        "ï¼ˆæç¤ºï¼šåœ¨å‡ºç§Ÿå±‹ä¸»ç•Œé¢ç‚¹å‡» [ğŸ§˜ æ‰“åä¿®ç‚¼] å³å¯æå‡å®åŠ›ã€‚ä¿®ç‚¼éœ€è¦æ¶ˆè€—ç²¾åŠ›å’ŒçµçŸ³ã€‚ï¼‰",
      options: [
        {
          text: "è®°ä½è¿™ä¸ªæ„Ÿè§‰ï¼Œåœæ­¢ä¿®ç‚¼",
          next: "ch1_menu_hint",
          effects: { exp: 10, energy: -2 }
        }
      ]
    },
  
    {
      id: "ch1_menu_hint",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ èµ·èº«æ´»åŠ¨äº†ä¸€ä¸‹ç­‹éª¨ï¼Œé¡ºæ‰‹ç¿»äº†ç¿»èƒŒåŒ…ï¼ŒæŠŠåˆšä¹°çš„ä¸œè¥¿å’Œéšèº«ç‰©å“æ•´ç†å¥½ã€‚\n\n" +
        "ä½ çªç„¶æ„è¯†åˆ°ï¼š\n" +
        "â€”â€”åœ¨è¿™ä¸ªå……æ»¡æœªçŸ¥çš„åŸå¸‚é‡Œï¼Œä½ éœ€è¦æ—¶åˆ»æŒæ¡è‡ªå·±çš„çŠ¶æ€ã€‚\n\n" +
        "ä½ æ‹¿èµ·æ‰‹æœºï¼Œç•Œé¢ä¸Šä»¿ä½›å¤šäº†ä¸€å±‚ä½ ä»¥å‰æ³¨æ„ä¸åˆ°çš„ã€é¢æ¿ã€ï¼š\n" +
        "å¢ƒç•Œã€ç­‰çº§ã€æ°”è¡€ã€çµåŠ›ã€è£…å¤‡ã€ä¸¹è¯ã€ä¿®ç‚¼â€¦â€¦ä¸€ç›®äº†ç„¶ã€‚\n\n" +
        "ï¼ˆæç¤ºï¼šç‚¹å‡»å³ä¸Šè§’çš„ã€Œèœå•ã€æŒ‰é’®ï¼Œå¯ä»¥æ‰“å¼€ç©å®¶èœå•ï¼ŒæŸ¥çœ‹çŠ¶æ€ã€èƒŒåŒ…ã€è£…å¤‡ä¸ä¿®ç‚¼ã€‚ï¼‰",
      options: [
        {
          text: "å…³é—­ç•Œé¢ï¼Œå‡†å¤‡å»è§çº¢å§",
          next: "ch1_party_1",
          effects: { energy: -5 }
        },
        {
          text: "å†åœ¨é™„è¿‘è¡—åŒºèµ°ä¸€åœˆï¼Œç†Ÿæ‚‰ç¯å¢ƒ",
          next: "ch1_street_explore",
          effects: { energy: -5 }
        }
      ]
    },
  
    // ===== 6. é…’å§åˆè§çº¢å§ =====
    {
      id: "ch1_party_1",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "æ™šä¸Šå…«ç‚¹ï¼Œä½ æŒ‰ç€å¯¼èˆªæ¥åˆ°ä¸€å®¶è—åœ¨å··å­æ·±å¤„çš„æ¸…å§ã€‚\n\n" +
        "é—¨å£çš„éœ“è™¹ç¯å†™ç€ä¸€ä¸ªæœ‰ç‚¹ä¿—æ°”çš„åå­—ï¼Œä½†ä»é—¨ç¼é‡Œé€å‡ºçš„å…‰å’ŒéŸ³ä¹ï¼Œ" +
        "è®©ä½ éšçº¦è§‰å¾—è¿™é‡Œæ¯”ç…§ç‰‡ä¸Šçœ‹èµ·æ¥æœ‰è¶£å¾—å¤šã€‚",
      options: [
        {
          text: "æ¨é—¨è¿›å»ï¼Œå¯»æ‰¾çº¢å§çš„èº«å½±",
          next: "ch1_party_2",
          effects: { exp: 5, energy: -5 }
        }
      ]
    },
  
    {
      id: "ch1_party_2",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ åˆšæ¨é—¨ï¼ŒéŸ³ä¹ä¸€ä¸‹å­æ¶Œäº†å‡ºæ¥ã€‚\n\n" +
        "äººç¾¤ä¸ç®—å¤šï¼Œå´åˆšå¥½æŠŠç©ºé—´å¡«å¾—åˆšåˆšå¥½ã€‚\n\n" +
        "ç¯å…‰åœ¨ä¸€åœˆåœˆæ‰“ï¼Œäººç¾¤é—´æœ‰ç¬‘å£°ã€ç¢°æ¯å£°ï¼Œè¿˜æœ‰ä¸€å£°éå¸¸ç†Ÿæ‚‰çš„ï¼š\n" +
        "ã€Œè¿™è¾¹â€”â€”ï¼ã€\n\n" +
        "ä½ é¡ºç€å£°éŸ³çœ‹è¿‡å»ï¼Œä¸€ä¸ªç©¿ç€ç®€æ´å´æå…¶æ˜¾çœ¼çš„å¥³å­©æœä½ æŒ¥æ‰‹ï¼Œ" +
        "ç¬‘å¾—åƒæ•´æ¡å§å°çš„ç¯éƒ½è¢«å¥¹ç‚¹äº®â€”â€”é‚£å°±æ˜¯çº¢å§ã€‚",
      options: [
        {
          text: "èµ°è¿‡å»ï¼Œå’Œçº¢å§æ‰“æ‹›å‘¼",
          next: "ch1_party_3",
          effects: { exp: 10, energy: -2 },
          action: function() {
              // è‡ªåŠ¨è§£é”çº¢å§åˆ°äººè„‰åˆ—è¡¨
              if (Game.Social && Game.Social.meetNPC) {
                  Game.Social.meetNPC("çº¢å§");
              }
          }
        }
      ]
    },
  
    {
      id: "ch1_party_3",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ã€Œæ¥äº†å•Šï¼Œæ–°å—æ˜Œäººï¼Ÿã€çº¢å§ä¸€è¾¹æŠŠä½ æ‹‰åˆ°åº§ä½ä¸Šï¼Œä¸€è¾¹åˆ©è½åœ°æ›¿ä½ æŒ¡æ‰ä¸€æ¯é…’ã€‚\n\n" +
        "ã€Œè¿™æ˜¯æ˜¥å¤ã€å°æ¢¦ã€å¤©æ‰å“¥â€¦â€¦ã€å¥¹åƒä¸»æŒäººä¸€æ ·ç»™æ¯ä¸ªäººåšç€ä»‹ç»ï¼Œ" +
        "åˆåƒå¯¼æ¼”ä¸€æ ·éšæ‰‹æŠŠä½ å¡è¿›è¿™ç¾¤äººçš„å¯¹è¯é‡Œã€‚\n\n" +
        "ä½ å¾ˆå¿«å‘ç°ï¼Œå¥¹æ€»æ˜¯é‚£ä¸ªæœ€åµçš„ï¼Œå´ä¹Ÿæ˜¯é‚£ä¸ªéšæ—¶åœ¨ç…§é¡¾åˆ«äººæƒ…ç»ªçš„äººã€‚",
      options: [
        {
          text: "é¡ºç€å¥¹çš„èŠ‚å¥æ‰“æ‹›å‘¼ï¼Œèå…¥è¿™æ¡Œäºº",
          next: "ch1_party_chat_1",
          effects: { exp: 10, energy: -2 },
          action: function() {
              // è‡ªåŠ¨è§£é”çº¢å§åˆ°äººè„‰åˆ—è¡¨
              if (Game.Social && Game.Social.meetNPC) {
                  Game.Social.meetNPC("çº¢å§");
                  console.log("å‰§æƒ…è§¦å‘ï¼šç»“è¯†çº¢å§");
              }
          }
        },
        {
          text: "ä¸€è¾¹å¯’æš„ï¼Œä¸€è¾¹é»˜é»˜è§‚å¯Ÿçº¢å§çš„çŠ¶æ€",
          next: "ch1_party_observe_1",
          effects: { exp: 15, energy: -2 },
          action: function() {
              // è‡ªåŠ¨è§£é”çº¢å§åˆ°äººè„‰åˆ—è¡¨
              if (Game.Social && Game.Social.meetNPC) {
                  Game.Social.meetNPC("çº¢å§");
                  console.log("å‰§æƒ…è§¦å‘ï¼šç»“è¯†çº¢å§");
              }
          }
        }
      ]
    },
  
    {
      id: "ch1_party_chat_1",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "åœ¨å¥¹çš„ç‰µçº¿ä¸‹ï¼Œä½ å¾ˆå¿«çŸ¥é“äº†å‡ ä¸ªäººçš„å¤§è‡´æƒ…å†µâ€”â€”\n" +
        "è°åˆšç¦»èŒï¼Œè°åˆè¢«å®¢æˆ·æŠ˜è…¾å¾—æƒ³å‡ºå®¶ï¼Œè°çœ‹èµ·æ¥å¾ˆé…·å…¶å®æ˜¯ä¸ªç¤¾æã€‚\n\n" +
        "çº¢å§åƒä¸€å°æ°¸ä¸å®•æœºçš„ç¤¾äº¤æœåŠ¡å™¨ï¼Œ" +
        "åœ¨ä¸åŒè¯é¢˜é—´æ¥å›åˆ‡æ¢ï¼Œå“ªä¸€æ¡Œå†·åœºå¥¹å°±å¾€å“ªä¸€æ¡Œè·‘ã€‚\n\n" +
        "ä½ ä¸çŸ¥ä¸è§‰ä¹Ÿè¢«å¥¹çš„èŠ‚å¥å¸¦å¾—æ”¾æ¾ä¸‹æ¥ã€‚",
      options: [
        {
          text: "åœ¨å¥¹å¿™å®Œä¸€åœˆåï¼Œæ‰¾æœºä¼šå•ç‹¬å’Œå¥¹è¯´å‡ å¥",
          next: "ch1_party_talk_private",
          effects: { energy: -2 }
        }
      ]
    },
  
    {
      id: "ch1_party_observe_1",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ å‘ç°ä¸€ä¸ªç»†èŠ‚â€”â€”\n" +
        "çº¢å§ç¬‘èµ·æ¥çš„æ—¶å€™çœ¼è§’ä¼šå…ˆå¼¯ï¼Œå¯å½“å¥¹æ”¶å›ç¬‘æ„æ—¶ï¼Œçœ¼ç¥ä¼šç©ºä¸€ç§’ã€‚\n\n" +
        "å¥¹ç»™åˆ«äººå€’é…’ã€å¸®äººæ¢æ­Œã€å¸®äººæŒ¡ä½æ— èŠçš„è¯é¢˜ï¼Œ" +
        "åƒæ˜¯åœ¨è¿™é—´å°å°çš„åœºå­é‡Œç»´æŒç€æŸç§ç§©åºã€‚\n\n" +
        "ä½†æ¯å½“éŸ³ä¹å£°ç¨å¾®ä½ä¸‹æ¥ï¼Œä½ éƒ½èƒ½çœ‹åˆ°å¥¹ä¸‹æ„è¯†åœ°åˆæŠŠéŸ³é‡è°ƒé«˜ä¸€ç‚¹ã€‚",
      options: [
        {
          text: "ç­‰å¥¹å¿™å®Œä¸€åœˆï¼Œæ‰¾ä¸ªè§’è½å•ç‹¬èŠèŠ",
          next: "ch1_party_talk_private",
          effects: { exp: 10, energy: -2 }
        }
      ]
    },
  
    {
      id: "ch1_party_talk_private",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "äººç¾¤ç¨å¾®æ•£å¼€ä¸€ç‚¹çš„æ—¶å€™ï¼Œä½ å’Œçº¢å§é åœ¨å§å°æ—è¾¹ã€‚\n\n" +
        "å¥¹ç»™è‡ªå·±å€’äº†åŠæ¯é…’ï¼Œç»™ä½ æ¢æˆäº†æœæ±ã€‚\n\n" +
        "ã€Œæ„Ÿè§‰æ€ä¹ˆæ ·ï¼Ÿã€å¥¹é—®ã€‚\n\n" +
        "ä½ è¯´å‡ºäº†å¿ƒé‡Œè¯ï¼š\n" +
        "ã€ŒåŸå¸‚æŒºäº®çš„ï¼Œå°±æ˜¯â€¦â€¦æ€•è‡ªå·±æ´»æˆèƒŒæ™¯ç¯ã€‚ã€\n\n" +
        "å¥¹æ„£äº†ä¸€ä¸‹ï¼Œçªç„¶ç¬‘äº†å‡ºæ¥ï¼šã€Œé‚£æˆ‘ä»¬æŒºåƒçš„ã€‚ã€",
      options: [
        {
          text: "é¡ºç€å¥¹çš„è¯é—®ä¸‹å»ï¼šä½ ä¹Ÿæ˜¯è¿™æ ·è§‰å¾—çš„å—ï¼Ÿ",
          next: "ch1_party_deep_talk",
          effects: { exp: 15, energy: -2 }
        }
      ]
    },
  
    {
      id: "ch1_party_deep_talk",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ã€Œæˆ‘è®¨åŒæ— èŠçš„ç”Ÿæ´»ã€‚ã€çº¢å§æ™ƒç€æ¯å­ï¼Œçœ‹ç€æ¯å£ä¸Šçš„ç¯å…‰ã€‚\n\n" +
        "ã€Œç™½å¤©å¤§å®¶éƒ½å½“æˆ‘æ™®é€šæ‰“å·¥äººï¼Œæ–‡ä»¶ã€ä¼šè®®ã€Excelâ€¦â€¦" +
        "æ™šä¸Šè‡³å°‘è¿˜èƒ½è®©æˆ‘è§‰å¾—è‡ªå·±æ˜¯è¿™æ¡è¡—ä¸Šæœ€é—ªçš„ç¯ã€‚ã€\n\n" +
        "å¥¹ç¬‘å¾—æœ‰ç‚¹è‡ªå˜²ï¼Œå´æ²¡æœ‰åœä¸‹æ¥ã€‚\n" +
        "ã€Œä¸è¿‡â€”â€”ã€å¥¹é¡¿äº†é¡¿ï¼Œç›®å…‰ä»æ¯å­ç§»åˆ°ä½ èº«ä¸Šï¼Œ" +
        "ã€Œç¯å¤ªäº®äº†ï¼Œä¹Ÿä¼šè¢«è‡ªå·±ç…§å¾—çœ‹ä¸è§è·¯ã€‚ã€",
      options: [
        {
          text: "ä½ è®¤çœŸçœ‹ç€å¥¹ï¼šä½ ä¸è§‰å¾—ç´¯å—ï¼Ÿ",
          next: "ch1_party_deep_talk_2",
          effects: { exp: 10 }
        }
      ]
    },
  
    {
      id: "ch1_party_deep_talk_2",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "å¥¹æƒ³äº†æƒ³ï¼Œæ²¡æœ‰ç«‹åˆ»å¼€ç©ç¬‘å¸¦è¿‡å»ã€‚\n\n" +
        "ã€Œç´¯å•Šã€‚ã€å¥¹å¾ˆå¦ç™½ã€‚\n" +
        "ã€Œä½†å¦‚æœæˆ‘èººå¹³ï¼Œå¤§å®¶å°±è§‰å¾—â€”â€”å•Šï¼Œå¥¹ä¹Ÿä¸è¿‡å¦‚æ­¤ã€‚ã€\n\n" +
        "å¥¹æŠ¬æ‰‹ç†äº†ä¸€ä¸‹å¤´å‘ï¼ŒæŠŠé‚£ç‚¹è„†å¼±å‹å›å»ï¼Œé‡æ–°æ¢ä¸Šä¸€è„¸è½»æ¾çš„è¡¨æƒ…ã€‚\n" +
        "ã€Œè¡Œäº†ï¼Œåˆ«èŠè¿™ä¹ˆä¸§ï¼Œä½ ä»Šå¤©ç¬¬ä¸€æ¬¡æ¥å—æ˜Œï¼Œ" +
        "æˆ‘å¾—è®©ä½ è®°ä½è¿™åº§åŸå¸‚æ™šä¸Šè¿˜æ˜¯æœ‰ç‚¹æ„æ€çš„ã€‚ã€",
      options: [
        {
          text: "é¡ºå£æ¥ä¸€å¥ï¼šæˆ‘è®°ä½çš„å¯èƒ½æ˜¯ä½ ã€‚",
          next: "ch1_party_react_to_joke",
          effects: { exp: 10, energy: -2 }
        },
        {
          text: "åªæ˜¯ç‚¹ç‚¹å¤´ï¼ŒæŠŠè¿™ä»½å¦ç™½è®°åœ¨å¿ƒé‡Œ",
          next: "ch1_party_before_demon_entry",
          effects: { exp: 5, energy: -2 }
        }
      ]
    },
  
    {
      id: "ch1_party_react_to_joke",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ åŠå¼€ç©ç¬‘åœ°è¯´äº†ä¸€å¥ï¼Œå¥¹æ„£äº†åŠç§’ï¼Œéšå³ç¬‘å¾—æ›´å¤§å£°ã€‚\n\n" +
        "ã€Œä¼šè¯´è¯å•Šä½ ã€‚ã€å¥¹ç”¨æŒ‡èŠ‚è½»è½»æ•²äº†ä¸‹ä½ çš„æ¯å­ã€‚\n" +
        "ã€Œé‚£ä½ å¯è¦æ´»ä¹…ä¸€ç‚¹ï¼Œåˆ«åˆšè®°ä½æˆ‘å°±è¢«å—æ˜Œå·èµ°äº†ã€‚ã€\n\n" +
        "è¿™å¥ç©ç¬‘å¾ˆè½»ï¼Œä½†ä½ èƒ½å¬å‡ºé‡Œé¢è—ç€ä¸€äº›è®¤çœŸã€‚",
      options: [
        {
          text: "ä½ æ²¡æœ‰å†æ‹†å¼€ï¼Œåªæ˜¯æŠŠæ¯å­ä¸¾äº†ä¸¾",
          next: "ch1_party_before_demon_entry",
          effects: { exp: 5, energy: -2 }
        }
      ]
    },
  
    // ===== 7. å¤œå®µæ‘Š / å°åº—å•†åº—å…¥å£ï¼ˆå¯é€‰ï¼‰ =====
    {
      id: "ch1_night_stall_visit",
      type: "shop",
      shopId: "ch1_night_stall",
      speaker: "æ—ç™½",
      text:
        "ä½ è·Ÿç€ä¼—äººä»é…’å§å‡ºæ¥ï¼Œè¡—è§’çš„å¤œå®µæ‘Šå†’ç€çƒ­è…¾è…¾çš„é›¾æ°”ã€‚\n\n" +
        "ç¢³ç«çš„å‘³é“ã€è¾£æ¤’å’Œå­œç„¶çš„é¦™å‘³æ··åœ¨ä¸€èµ·ï¼Œ" +
        "è®©ä½ çªç„¶æ„è¯†åˆ°è‡ªå·±å¥½åƒè¿˜æ²¡åƒæ™šé¥­ã€‚\n\n" +
        "æ‘Šä¸»ä¸€è¾¹ç¿»ä¸²ï¼Œä¸€è¾¹æ‹›å‘¼ä½ ç‚¹å•ï¼Œè¿™é‡Œä¹Ÿèƒ½ä¹°åˆ°ä¸€äº›ç®€å•çš„ä¸¹è¯å’Œè¡¥ç»™ã€‚",
      next: "ch1_party_before_demon_entry"
    },
  
    // ===== 8. å¿ƒé­”å‰å¯¼ï¼šç”µè¯ + åºŸå¼ƒåœ°é“ç«™ =====
    {
      id: "ch1_party_before_demon_entry",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "èšä¼šè¿›è¡Œåˆ°ä¸€åŠï¼Œçº¢å§çš„æ‰‹æœºçªç„¶å“äº†ã€‚\n\n" +
        "å¥¹çœ‹äº†ä¸€çœ¼æ¥ç”µæ˜¾ç¤ºï¼Œç¬‘æ„æ”¶äº†æ”¶ï¼Œèµ°åˆ°ä¸€æ—æ¥ç”µè¯ã€‚\n\n" +
        "ä½ çœ‹ç€å¥¹çš„èƒŒå½±â€”â€”ç¯å…‰ä»å¥¹èº«ä¸Šåˆ’è¿‡ï¼Œå¥¹çš„å½±å­åœ¨åœ°ä¸Šæ‹‰å¾—å¾ˆé•¿ï¼Œ" +
        "é•¿åˆ°åƒå¦ä¸€ä¸ªäººã€‚",
      options: [
        {
          text: "ç­‰å¥¹å›æ¥ï¼Œçœ‹çœ‹å¥¹ä¼šè¯´ä»€ä¹ˆ",
          next: "ch1_party_before_demon",
          effects: { energy: -2 }
        },
        {
          text: "å…ˆå»å¤œå®µæ‘Šè¾¹åƒè¾¹ç­‰",
          next: "ch1_night_stall_visit",
          effects: { energy: -5 }
        }
      ]
    },
  
    {
      id: "ch1_party_before_demon",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "å‡ åˆ†é’Ÿåï¼Œçº¢å§å›åˆ°ä½ èº«è¾¹ï¼Œè„¸ä¸Šçš„ç¬‘æ„å·²ç»é‡æ–°æˆ´å¥½ï¼Œ" +
        "ä½†ä½ èƒ½çœ‹å‡ºé‚£æ˜¯åˆšåˆšè°ƒæ•´å¥½çš„è¡¨æƒ…ã€‚\n\n" +
        "ã€Œæœ‰ä¸ªåœ°æ–¹æœ€è¿‘æ€»å‡ºäº‹ã€‚ã€å¥¹å‹ä½å£°éŸ³è¯´ï¼Œ" +
        "ã€Œå¾—å»çœ‹ä¸€çœ¼ã€‚ä½ è¦ä¸è¦è·Ÿæˆ‘å»è§è¯†ä¸€ä¸‹çœŸæ­£çš„å—æ˜Œå¤œç”Ÿæ´»ï¼Ÿã€\n\n" +
        "å¥¹è¯´ã€Œå¤œç”Ÿæ´»ã€çš„æ—¶å€™ï¼Œçœ¼ç¥ä¸åƒæ˜¯åœ¨è¯´ç©ä¹ï¼Œæ›´åƒæ˜¯åœ¨è¯´å¦ä¸€å±‚ä¸–ç•Œã€‚",
      options: [
        {
          text: "ç›´æ¥è·Ÿå¥¹ä¸€èµ·å»ï¼ˆç¡¬æ ¸ï¼‰",
          next: "ch1_heart_demon_trigger",
          effects: { energy: -5 },
          action: function() {
              // ä¿é™©èµ·è§ï¼šç¡®ä¿çº¢å§å·²è§£é”åˆ°äººè„‰åˆ—è¡¨
              if (Game.Social && Game.Social.meetNPC) {
                  Game.Social.meetNPC("çº¢å§");
                  console.log("å‰§æƒ…è§¦å‘ï¼šç¡®ä¿çº¢å§å·²è§£é”");
              }
          }
        },
        {
          text: "å…ˆå›å‡ºç§Ÿå±‹æ•´ç†ä¸€ä¸‹è£…å¤‡å’Œä¸¹è¯ï¼Œå†å»",
          next: "ch1_prepare_before_demon",
          effects: { energy: -5 },
          action: function() {
              // ä¿é™©èµ·è§ï¼šç¡®ä¿çº¢å§å·²è§£é”åˆ°äººè„‰åˆ—è¡¨
              if (Game.Social && Game.Social.meetNPC) {
                  Game.Social.meetNPC("çº¢å§");
                  console.log("å‰§æƒ…è§¦å‘ï¼šç¡®ä¿çº¢å§å·²è§£é”");
              }
          }
        }
      ]
    },
  
    {
      id: "ch1_prepare_before_demon",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ è¯´æƒ³å…ˆå‡†å¤‡ä¸€ä¸‹ï¼Œçº¢å§ç‚¹ç‚¹å¤´ã€‚\n\n" +
        "ã€Œå¯ä»¥ï¼Œç»™ä½ åŠä¸ªå°æ—¶ã€‚æˆ‘åœ¨æ¥¼ä¸‹ç­‰ä½ ã€‚ã€\n\n" +
        "ä½ å›åˆ°å‡ºç§Ÿå±‹ï¼Œæ‰“å¼€èœå•ï¼Œæ£€æŸ¥è‡ªå·±çš„çŠ¶æ€å’ŒèƒŒåŒ…ï¼Œ" +
        "è„‘å­é‡Œåå¤å›æ”¾ç€åˆšæ‰é‚£é€šç”µè¯åå¥¹çš„è¡¨æƒ…å˜åŒ–ã€‚\n\n" +
        "ä½ éšéšæœ‰ç§é¢„æ„Ÿï¼šæ¥ä¸‹æ¥çš„æˆ˜æ–—ä¸ä¼šè½»æ¾ã€‚\n" +
        "å¦‚æœä½ å®Œå…¨æ²¡ä¿®ç‚¼ã€èº«ä¸Šä¹Ÿæ²¡å¸¦è¯ï¼Œè¿™ä¸€æˆ˜å¯èƒ½ä¼šå¾ˆç¡¬ã€‚\n\n" +
        "ï¼ˆæç¤ºï¼šç°åœ¨æ˜¯æ•´ç†æœŸï¼Œå¯ä»¥å»ä¾¿åˆ©åº—è¡¥ç»™ã€è¿›è¡Œä¿®ç‚¼ã€è°ƒæ•´è£…å¤‡ã€‚ï¼‰",
      options: [
        {
          text: "å»ä¾¿åˆ©åº—è¡¥äº›ä¸¹è¯å’Œé£Ÿç‰©",
          next: "ch1_convenience_store_visit",
          effects: { energy: -5 }
        },
        {
          text: "å†ä¿®ç‚¼ä¸€ä¼šå„¿ï¼Œè®©è‡ªå·±å¿ƒé‡Œè¸å®ç‚¹",
          next: "ch1_rental_night_cultivate",
          effects: { energy: -2 }
        },
        {
          text: "å»åºŸå¼ƒå·¥å‚å¿«é€Ÿç»ƒçº§ï¼Œæå‡å®åŠ›",
          next: "ch1_training_area_hub",
          effects: { energy: -5 }
        },
        {
          text: "è§‰å¾—å·®ä¸å¤šäº†ï¼Œå»æ‰¾çº¢å§ä¼šåˆ",
          next: "ch1_heart_demon_trigger",
          effects: { energy: -5 }
        }
      ]
    },
  
    // ===== 9. å¿ƒé­”è§¦å‘ï¼šåºŸå¼ƒåœ°é“ç«™å…¥å£ =====
    {
      id: "ch1_heart_demon_trigger",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ å’Œçº¢å§æ¥åˆ°ä¸€å¤„å·²ç»å°é—­çš„åœ°é“ç«™å…¥å£ã€‚\n\n" +
        "é“æ …æ ä¸ŠæŒ‚ç€â€œæ–½å·¥ä¸­â€çš„ç‰Œå­ï¼Œå‘¨å›´å´ä¸€ç‚¹æ–½å·¥çš„ç—•è¿¹éƒ½æ²¡æœ‰ï¼Œ" +
        "åªæœ‰è¢«é›¨æ·‹å¾—å‘äº®çš„å°é˜¶å‘ä¸‹å»¶ä¼¸ã€‚\n\n" +
        "ã€Œæœ€è¿‘è¿™é‡Œæ€»æœ‰äººè¯´å¬åˆ°å¥‡æ€ªçš„å£°éŸ³ã€‚ã€çº¢å§è¯´ï¼Œ" +
        "ã€Œç¬‘å£°ã€éŸ³ä¹ï¼Œè¿˜æœ‰â€¦â€¦åƒæ˜¯å¼€æ´¾å¯¹çš„é‚£ç§åµé—¹ã€‚ã€\n\n" +
        "å¥¹é¡¿äº†é¡¿ï¼Œçœ‹å‘ä½ ï¼š\n" +
        "ã€Œå¯è¿™ç«™ï¼Œæ—©å°±åºŸå¼ƒäº†ã€‚ã€",
      options: [
        {
          text: "ç‚¹å¤´ï¼Œè·Ÿç€å¥¹ä¸€æ­¥æ­¥èµ°ä¸‹å»",
          next: "ch1_heart_demon_trigger_2",
          effects: { energy: -5 }
        }
      ]
    },
  
    {
      id: "ch1_heart_demon_trigger_2",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä½ ä»¬èµ°ä¸‹å°é˜¶ï¼Œé›¨å£°è¢«éš”ç»åœ¨èº«åï¼Œç©ºæ°”å˜å¾—æ¹¿å†·è€Œå®‰é™ã€‚\n\n" +
        "è¶Šå¾€ä¸‹èµ°ï¼Œä½ è¶Šè§‰å¾—èƒ¸å£é‚£è‚¡åŠ›é‡åœ¨èºåŠ¨ï¼Œ" +
        "å¥½åƒæœ‰äººåœ¨ä½ è€³è¾¹è¯´è¯ï¼Œå´å¬ä¸æ¸…å†…å®¹ã€‚\n\n" +
        "ç¯å…‰é€æ¸å˜æš—ï¼Œæœ€ååªå‰©ä¸‹ä¸€ç›å¿½æ˜å¿½æš—çš„åº”æ€¥ç¯ï¼Œ" +
        "æŠŠæ•´ä¸ªç«™å°ç…§æˆä¸€å—ç°è‰²çš„ç©ºåœºã€‚\n\n" +
        "çº¢å§åœä¸‹è„šæ­¥ï¼Œæ·±å¸ä¸€å£æ°”ï¼š\n" +
        "ã€Œç­‰ä¼šå„¿ä¸ç®¡çœ‹åˆ°ä»€ä¹ˆï¼Œå…ˆè·Ÿç€æˆ‘ã€‚ã€\n\n" +
        "ä½ æ¡ç´§æ‹³å¤´ï¼Œæ„Ÿå—ç€ä½“å†…çµåŠ›çš„æµåŠ¨ã€‚\n" +
        "å¦‚æœä¹‹å‰æ²¡æœ‰å¥½å¥½å‡†å¤‡ï¼Œç°åœ¨å¯èƒ½å·²ç»æ¥ä¸åŠäº†â€”â€”" +
        "ä½†æ—¢ç„¶èµ°åˆ°äº†è¿™é‡Œï¼Œå°±åªèƒ½ç¡¬ç€å¤´çš®ä¸Šã€‚",
      options: [
        {
          text: "ç‚¹å¤´ï¼Œå‡†å¤‡æˆ˜æ–—",
          next: "ch1_heart_demon_battle_intro",
          effects: { energy: -10 }
        }
      ]
    },
  
    // ===== 10. å¿ƒé­”æˆ˜ï¼šå¼•å¯¼ + boss =====
    {
      id: "ch1_heart_demon_battle_intro",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "å¥¹è¯éŸ³åˆšè½ï¼Œæœ€åä¸€ç›åº”æ€¥ç¯â€œå•ªâ€çš„ä¸€å£°ç†„ç­ã€‚\n\n" +
        "é»‘æš—ä¸­ï¼ŒéŸ³ä¹å£°å¿½ç„¶å“èµ·â€”â€”ä¸æ˜¯ç°å®ä¸­çš„ï¼Œè€Œåƒæ˜¯ä»ä½ ä»¬å¤´é¡¶å’Œè„šä¸‹åŒæ—¶ä¼ æ¥ã€‚\n\n" +
        "æ¬¢å‘¼ã€ç¬‘å£°ã€ç¢°æ¯å£°ï¼Œä¸€åˆ‡ä½ åœ¨é…’å§é‡Œå¬åˆ°è¿‡çš„å£°éŸ³éƒ½è¢«æ”¾å¤§ã€æ‰­æ›²ï¼Œ" +
        "åœ¨è¿™ç‰‡æ²¡æœ‰äººçš„ç«™å°å›è¡ã€‚\n\n" +
        "ä¸€å›¢æ¯”å¤œè‰²æ›´æ·±çš„é˜´å½±ä»è¿œå¤„ç¼“ç¼“æµ®ç°ï¼Œ" +
        "è€Œä½ çœ‹åˆ°ï¼Œåœ¨é˜´å½±çš„ä¸­å¿ƒï¼Œæ˜¯ä¸€ä¸ªå’Œçº¢å§æå…¶ç›¸ä¼¼çš„è½®å»“ï¼Œ" +
        "å´ç¬‘å¾—æ¯”å¥¹åˆšæ‰ä»»ä½•ä¸€æ¬¡éƒ½è¦å¤¸å¼ ã€‚",
      options: [
        {
          text: "ã€Œâ€¦â€¦è¿™å°±æ˜¯ä½ çš„å¿ƒé­”ï¼Ÿã€",
          next: "ch1_heart_demon_battle",
          effects: { energy: -10 }
        }
      ]
    },
  
    {
      id: "ch1_heart_demon_battle",
      type: "battle",
      speaker: "æ—ç™½",
      text:
        "é˜´å½±å¼ å¼€åŒè‡‚ï¼Œåƒè¦æŠŠæ•´åº§ç«™å°éƒ½å˜æˆæ°¸è¿œä¸ä¼šæ‰“çƒŠçš„æ´¾å¯¹ã€‚\n\n" +
        "ã€å¤œå®´å¿ƒé­”Â·åˆç°ã€‘ç›¯ä¸Šäº†ä½ å’Œçº¢å§ï¼",
      enemyId: "heart_demon_ch1",
      options: [
        {
          text: "æˆ˜æ–—ï¼",
          next: "ch1_after_heart_demon",
          effects: { energy: -10 }
        }
      ]
    },
  
    // ===== 11. æˆ˜åï¼šè§‰é†’ + å¢ƒç•Œæå‡ =====
    {
      id: "ch1_after_heart_demon",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "ä¸çŸ¥è¿‡äº†å¤šä¹…ï¼Œç«™å°ä¸Šçš„å£°éŸ³ç»ˆäºä¸€ç‚¹ä¸€ç‚¹å®‰é™ä¸‹æ¥ã€‚\n\n" +
        "æœ€åä¸€ç‰‡é˜´å½±è¢«ä½ å’Œçº¢å§åˆåŠ›å‡»ç¢ï¼Œæ•£ä½œæ— æ•°ç»†å°çš„å…‰ç‚¹ï¼Œ" +
        "å…¶ä¸­ä¸€éƒ¨åˆ†è½å…¥å¥¹ä½“å†…ï¼Œå¦ä¸€éƒ¨åˆ†ï¼Œè½è¿›äº†ä½ å¿ƒå£ã€‚\n\n" +
        "ä½ æ„Ÿè§‰ä½“å†…çš„çµåŠ›åƒè¢«é‡æ–°æ´—è¿‡ä¸€éï¼Œå˜å¾—æ›´æ¸…æ¾ˆï¼Œä¹Ÿæ›´å¬è¯ã€‚\n\n" +
        "çº¢å§èµ°è¿‡æ¥ï¼Œæ‰‹è¿˜åœ¨å¾®å¾®å‘æŠ–ï¼Œå´ç¬‘äº†å‡ºæ¥ï¼š\n" +
        "ã€Œç¬¬ä¸€æ¬¡è§é¢å°±é™ªæˆ‘æ‰“è¿™ä¹ˆå¤§çš„ä»—ï¼Œ" +
        "ä½ è¿™ä¸ªæ–°å—æ˜Œäººâ€¦â€¦æŒºåˆæˆ‘çœ¼ç¼˜ã€‚ã€",
      options: [
        {
          text: "è¯¢é—®å¥¹ï¼šåˆšåˆšé‚£ä¸ªâ€¦â€¦çœŸçš„æ˜¯ä½ çš„å¿ƒé­”å—ï¼Ÿ",
          next: "ch1_after_heart_demon_2",
          effects: { exp: 100, level: 1, gold: 80 }
        }
      ]
    },
  
    {
      id: "ch1_after_heart_demon_2",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "å¥¹é åœ¨ä¸€æ ¹æŸ±å­ä¸Šï¼Œé•¿é•¿åå‡ºä¸€å£æ°”ã€‚\n\n" +
        "ã€Œå—¯ã€‚ã€å¥¹æ²¡æœ‰å¦è®¤ã€‚\n" +
        "ã€Œè®¨åŒæ— èŠï¼Œè®¨åŒè¢«é—å¿˜ï¼Œè®¨åŒåˆ«äººè§‰å¾—æˆ‘ä¸è¿‡å¦‚æ­¤â€¦â€¦" +
        "ä¹…è€Œä¹…ä¹‹ï¼Œè¿™ç§ä¸œè¥¿å°±ä¼šé•¿æˆä¸€å›¢æ€ªç‰©ã€‚ã€\n\n" +
        "å¥¹æŠ¬çœ¼çœ‹å‘ä½ ï¼Œå¤œè‰²é‡Œçœ¼ç›å¾ˆäº®ï¼š\n" +
        "ã€Œä¸è¿‡ä½ è¿æ°”ä¹ŸæŒºå¥½ï¼Œç¬¬ä¸€æ¬¡ä¸‹åœºå°±è§‰é†’äº†çµæ ¹ï¼Œ" +
        "è¿˜æ²¡è¢«å“è·‘ã€‚ã€",
      options: [
        {
          text: "ä½ ç¬‘ç¬‘ï¼šè¢«ç”Ÿæ´»å“è¿‡çš„äººï¼Œä¸æ€•å†å“ä¸€æ¬¡ã€‚",
          next: "ch1_party_end",
          effects: { exp: 20 }
        }
      ]
    },
  
    // ===== 12. ç¬¬ä¸€ç« ç»“æŸï¼Œè¿”å›å‡ºç§Ÿå±‹ =====
    {
      id: "ch1_party_end",
      type: "story",
      speaker: "æ—ç™½",
      text:
        "å›åˆ°åœ°é¢çš„æ—¶å€™ï¼Œé›¨å·²ç»åœäº†ã€‚\n\n" +
        "åŸå¸‚çš„ç¯è¿˜äº®ç€ï¼Œä½†ä½ çŸ¥é“ï¼Œ" +
        "ä»ä»Šæ™šèµ·ï¼Œä½ çœ‹åˆ°çš„ä¸–ç•Œå·²ç»å’Œå¤§å¤šæ•°äººä¸ä¸€æ ·ã€‚\n\n" +
        "å‡ºç§Ÿå±‹ä¾æ—§æ½®æ¹¿ï¼Œæˆ¿ç§Ÿä¸ä¼šå› ä¸ºä½ çš„è§‰é†’è€Œæ‰“æŠ˜ï¼Œ" +
        "å…¬å¸æ˜æ—©ç…§æ ·è¦ä½ æ‰“å¡ã€‚\n\n" +
        "å¯ä½ èƒ¸å£é‚£å›¢å…‰ä¸å†å®‰åˆ†ï¼Œå®ƒæé†’ä½ â€”â€”\n" +
        "è¿™åº§åŸå¸‚è¿˜æœ‰å¦ä¸€å±‚å¤œè‰²ï¼Œç­‰å¾…ä½ å’Œçº¢å§ä¸€èµ·å»æ¢ç´¢ã€‚\n\n" +
        "ã€ç¬¬ä¸€ç«  Â· ç¯ç«åˆé†’ã€‘ç»“æŸã€‚\n" +
        "æ–°çš„æ•…äº‹ï¼Œæ­£è¦å¼€å§‹ã€‚",
      options: [
        {
          text: "å®Œæˆç« èŠ‚ï¼Œè¿”å›å‡ºç§Ÿå±‹",
          action: function() {
              // æ›´æ–°è¿›åº¦
              Game.State.progress.currentChapter = 2;
              Game.State.progress.currentEventId = "ch1_party_end";
              
              // å­˜æ¡£
              if (Game.Save) {
                  Game.Save.save();
              }
              
              // è¿”å›ä¸»ç•Œé¢
              Game.Game.returnToHome();
          }
        }
      ]
    }
  ];
  